var Miro=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t,n,i,a,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}n.r(t),n.d(t,"showSpinnerIcon",function(){return c}),n.d(t,"changeTab",function(){return l}),n.d(t,"slideToggleEl",function(){return d}),n.d(t,"showNewNameBaseDialog",function(){return u}),n.d(t,"confirmModalShow",function(){return h}),n.d(t,"removeAttachment",function(){return f}),n.d(t,"downloadAttachment",function(){return p}),n.d(t,"changeDDButtonEvent",function(){return b}),n.d(t,"showJobsDialog",function(){return m}),n.d(t,"renderMathJax",function(){return v}),n.d(t,"validateSname",function(){return g}),n.d(t,"validateHcubeHash",function(){return y}),n.d(t,"hcHashImport",function(){return C}),n.d(t,"jumpToLogMark",function(){return w});var a={};function o(e){return new Promise(function(t){return setTimeout(t,e)})}function r(e){switch(e){case"inputData":$("#btImport").show(),$(".btSolve").show(),$("#btInterrupt").hide(),$("#btSplitView").hide(),$("#btCompareScen").hide();break;case"outputData":$("#btImport").hide(),$(".btSolve").hide(),$("#btInterrupt").hide(),$("#btSplitView").hide(),$("#btCompareScen").hide();break;case"gamsinter":$("#btImport").hide(),$(".btSolve").hide(),$("#btInterrupt").show(),$("#btSplitView").hide(),$("#btCompareScen").hide();break;case"scenarios":$("#btImport").hide(),$(".btSolve").hide(),$("#btInterrupt").hide(),$("#btSplitView").show(),$("#btCompareScen").show();break;default:$("#btImport").hide(),$(".btSolve").hide(),$("#btInterrupt").hide(),$("#btSplitView").hide(),$("#btCompareScen").hide()}}function s(e){switch(e){case"input":r("inputData"),$('[href="#shiny-tab-inputData"]').tab("show");break;case"output":r("outputData"),$('[href="#shiny-tab-outputData"]').tab("show");break;case"gamsinter":r("gamsinter"),$('[href="#shiny-tab-gamsinter"]').tab("show");break;case"importData":r("importData"),$('[href="#shiny-tab-importData"]').tab("show");break;case"hcubeAna":r("default"),$('[href="#shiny-tab-hcubeAnalyze"]').tab("show");break;case"scenComp":r("scenarios"),$('[href="#shiny-tab-scenarios"]').tab("show")}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;if(!a[$(e).prop("id")]){a[$(e).prop("id")]=!0;var n=$(e).html();$(e).html('<i class="fa fa-refresh fa-spin"></i>'),setTimeout(function(){$(e).html(n),a[$(e).prop("id")]=!1},t)}}function l(e,t,n){var i=e.closest(".tabbable");i.find("li:nth-of-type(".concat(t,")")).removeClass(),i.find("li:nth-of-type(".concat(n,")")).addClass("active"),i.find(".tab-content div:nth-child(".concat(t,")")).removeClass("active"),i.find(".tab-content div:nth-child(".concat(n,")")).addClass("active")}function d(e){void 0!==e.toggleIconDiv&&($(e.id).is(":visible")?$(e.toggleIconDiv).html('<i class="fa fa-plus"></i>'):$(e.toggleIconDiv).html('<i class="fa fa-minus"></i>'));var t=400;void 0===e.duration&&(t=e.duration),$(e.id).slideToggle(t)}function u(){$("#base-overwrite-container").hide(),$("#loadBase_snameExistsMsg").hide(),$("#loadBase_newName").show(),$("#btCheckSnameBase").show()}function h(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o='<button type="button" class="btn btn-default" data-dismiss="modal">'.concat(n,"</button>"),r="";null!==a&&(r='<button type="button" class="btn btn-default bt-highlight-1 bt-gms-confirm" '+'id="" onclick="'.concat(a,'" data-dismiss="modal">').concat(i,"</button>"));var s=$("#confirmModal");s.find(".modal-title").html(e),s.find(".modal-body").html(t),s.find(".modal-footer").html(o+r),s.modal("show")}function f(e){$("#btRemoveAttachment_".concat(e)).parent().parent().remove(),Shiny.setInputValue("btRemoveAttachment_".concat(e),1,{priority:"event"})}function p(e){Shiny.setInputValue("downloadAttachment",e,{priority:"event"}),setTimeout(function(){$("#downloadAttachmentData")[0].click()},200)}function b(e,t,n){$(t).attr("onclick","Shiny.setInputValue('".concat(n,"',1,{priority: 'event'});")),$(t).text(e),$(t).is(":enabled")&&Shiny.setInputValue(n,1,{priority:"event"})}function m(e){var t;($("#shiny-modal-wrapper").find(".modal").modal("hide"),e)?s("importData"):(s("gamsinter"),t="joblist",$("#".concat("jobListPanel")).find("a[data-value='".concat(t,"']")).tab("show"))}function v(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,"wrapper-documentation"])}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"btCheckSnameLocalConfirm";return!0!==/^[a-f0-9]{64}$/i.test($(e).val())&&!0!==/^\s*$/.test($(e).val())?($(e).removeClass("invalidInput"),"internal"===t||(Shiny.setInputValue(t,1,{priority:"event"}),!0)):($(e).addClass("invalidInput"),!1)}function y(){var e=$("#hcHashLookup").val();if(!0===/^[a-f0-9]{64}$/i.test(e)){if(!g("#hcube_newScenName","internal"))return;return $("#hcHashLookup").removeClass("invalidInput"),void Shiny.setInputValue("hcHashLookup",e,{priority:"event"})}$("#hcHashLookup").addClass("invalidInput")}function C(e){g("#hcube_newScenName","internal")&&Shiny.setInputValue("loadHcubeHashSid",e,{priority:"event"})}function w(e){return S.apply(this,arguments)}function S(){var e;return e=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s("gamsinter"),$('#logFileTabsset [data-value="mirolog"]').tab("show"),e.next=4,o(200);case 4:void 0!==(n=$("#mlogMark_".concat(t)))&&(n[0].scrollIntoView(),n.animate({backgroundColor:"yellow"},400).delay(1e3).animate({backgroundColor:"transparent"},400));case 6:case"end":return e.stop()}},e)}),(S=function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,c,"next",e)}function c(e){i(r,a,o,s,c,"throw",e)}s(void 0)})}).apply(this,arguments)}function k(e){return!!$(e).parents(".form-group").length}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;setTimeout(function(){var e=$(".rhandsontable:visible").get(0);void 0!==e&&HTMLWidgets.getInstance(e).hot.render()},e)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;setTimeout(function(){$(e).animate({scrollTop:$(e)[0].scrollHeight-$(e)[0].clientHeight},300)},t)}$(document).ready(function(){$("#toolCategories").on("click",".category-btn",function(){var e=this.dataset.cat,t=$(".cat-body-".concat(e));$(".cat-body:visible").hide(),$(".category-btn").removeClass("category-btn-active"),$(this).addClass("category-btn-active"),t.show()}),$(".dropdown").on("show.bs.dropdown",function(e){var t=$(e.target),n=t.children(".dropdown-menu").first();n.width()<=t.width()+t.offset().left-t.parent().offset().left?n.addClass("dropdown-menu-right"):n.removeClass("dropdown-menu-right")}),"undefined"!=typeof Selectize&&Selectize.define("no_delete",function(){var e,t=this;this.deleteSelection=(e=t.deleteSelection,function(t){if(!t||8!==t.keyCode&&46!==t.keyCode){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return e.apply(this,i)}return!1})}),$("body").addClass("fixed"),$("#btImport").show(),$(".btSolve").show(),$("#btInterrupt").hide(),$("#btSplitView").hide(),$("#btCompareScen").hide(),$("#btLoadScen").hide(),$('a[data-value="inputData"]').click(function(){r("inputData"),I()}),$('a[data-value="outputData"]').click(function(){r("outputData")}),$('a[data-value="gamsinter"]').click(function(){r("gamsinter")}),$('a[data-value="scenarios"]').click(function(){r("scenarios")}),$("#scenTabset").on("click",'a[data-toggle="tab"]',function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{setTimeout(function(){HTMLWidgets.getInstance($(".dygraphs:visible").get(0)).dygraph.resize()},e)}catch(e){}}()}),$('a[data-value="advanced"],a[data-value="importData"],a[data-value="loadResults"],a[data-value="hcubeAnalyze"]').click(function(){r("default")}),$("#inputTabset li").click(function(){I()}),$("#scenTabset").append('<li id="scenTabsetAdd"><a href="#" id="btLoadScen" data-value="scen_add" onclick="Shiny.setInputValue(\'btLoadScen\', 1, {priority: \'event\'});"><i class="far fa-plus-square" style="font-size:13pt;"></i></a></li>'),Shiny.addCustomMessageHandler("gms-switchTab",function(e){s(e)}),$("body").on("click",".bt-highlight-1, .bt-highlight-2, .bt-highlight-3",function(){var e=$(this);e.hasClass("dropdown-toggle")||(e.prop("disabled",!0),setTimeout(function(){e.prop("disabled",!1)},1500))}),$(document).click(function(e){var t=e.target;$(t).is(".pvtAttr")||$(t).parents(".pvtAttr").length||$(t).is(".pvtFilterBox")||$(t).parents(".pvtFilterBox").length||$(".pvtFilterBox").hide()}),$(".sidebar-toggle").click(function(){I(400)}),window.addEventListener("beforeunload",function(e){0===$("#shiny-disconnected-overlay").length&&(e.preventDefault(),e.returnValue="Are you sure you want to leave? Unsaved changes will be lost!")}),Shiny.addCustomMessageHandler("gms-showEl",function(e){k(e)?$(e).closest(".shiny-input-container").show():$(e).show()}),Shiny.addCustomMessageHandler("gms-showElReplaceTxt",function(e){$(e.id).text(e.txt).show()}),Shiny.addCustomMessageHandler("gms-showLogContent",function(e){if($(e.id).text(e.content),!(e.chunkCount<=1)){var t=e.noChunks;if(!(void 0===t||t<=1)){var n=1,i=!1;$(e.id).on("scroll",function(){$(e.id)[0].scrollHeight-$(e.id).scrollTop()<$(e.id).outerHeight()+200&&!1===i&&(i=!0,Shiny.setInputValue("loadTextEntityChunk",{jID:e.jID,chunkCount:n,type:e.type},{priority:"event"}),(n+=1)===t&&$(e.id).off("scroll"))}),$(e.id).on("change",function(){setTimeout(function(){i=!1},1e3)})}}}),Shiny.addCustomMessageHandler("gms-hideEl",function(e){k(e)?$(e).closest(".shiny-input-container").hide():$(e).hide()}),Shiny.addCustomMessageHandler("gms-showHideEl",function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!==n&&$(e).text(n),$(e).show().delay(t).fadeOut()}(e.id,e.delay,e.msg)}),Shiny.addCustomMessageHandler("gms-enableEl",function(e){$(e).prop("disabled",!1)}),Shiny.addCustomMessageHandler("gms-disableEl",function(e){$(e).prop("disabled",!0)}),Shiny.addCustomMessageHandler("gms-toggleEl",function(e){$(e).is(":visible")?($(e).toggle(),$(e).trigger("shown")):($(e).fadeToggle(600),$(e).trigger("hidden"))}),Shiny.addCustomMessageHandler("gms-slideToggleEl",function(e){d(e)}),Shiny.addCustomMessageHandler("gms-addClassEl",function(e){$(e.id).addClass(e.newclass)}),Shiny.addCustomMessageHandler("gms-removeClassEl",function(e){$(e.id).removeClass(e.oldclass)}),Shiny.addCustomMessageHandler("gms-emptyEl",function(e){$(e).empty()}),Shiny.addCustomMessageHandler("gms-appendEl",function(e){var t=e.content;e.text&&(t=document.createTextNode(t)),$(e.id).append(t),e.triggerChange&&$(e.id).trigger("change"),e.scroll&&M(e.id,50)}),Shiny.addCustomMessageHandler("gms-scrollDown",function(e){M(e)}),Shiny.addCustomMessageHandler("gms-startUpdateJobProgress",function(e){var t=setInterval(function(){"100"!==$(e.id).attr("aria-valuenow")&&$(e.id).is(":visible")||clearInterval(t),Shiny.setInputValue("updateJobProgress",e.jID,{priority:"event"})},5e3)}),Shiny.addCustomMessageHandler("gms-updateJobProgress",function(e){if($(e.id).is(":visible")){var t=Math.round(parseInt(e.progress.noCompleted,10)/parseInt(e.progress.noTotal,10)*100);$(e.id).css("width","".concat(t,"%")).attr("aria-valuenow",t).text("".concat(e.progress.noCompleted,"/").concat(e.progress.noTotal))}}),Shiny.addCustomMessageHandler("gms-markJobDownloadComplete",function(e){!0===e.triggerImport&&$("#jobImportDlProgressWrapper_".concat(e.id)).is(":visible")&&Shiny.setInputValue("importJob",e.id,{priority:"event"}),$("#jobImportDlProgressWrapper_".concat(e.id)).siblings("div:first").text(e.text),$("#jobImportDlProgressWrapper_".concat(e.id)).hide(),$("#btDownloadJob_".concat(e.id)).hide(),$("#btImportJob_".concat(e.id)).show()}),Shiny.addCustomMessageHandler("gms-hideModal",function(e){setTimeout(function(){$("#shiny-modal-wrapper").find(".modal").modal("hide")},1e3*e)}),Shiny.addCustomMessageHandler("gms-updateAttachList",function(e){for(var t=$.makeArray(e.id),n=$.makeArray(e.name),i=0;i<t.length;i+=1){var a="";e.allowExec&&(a='<div class="col-sm-6"><div class="form-group shiny-input-container"><div class="checkbox"><label><input type="checkbox" onchange="Shiny.setInputValue(\'execPermAttachment_'.concat(t[i],"', $(this).is(':checked'));\" checked=\"checked\"><span>").concat(e.labelCb,"</span></label></div></div></div>")),$('<div class="row attachment-line"><div class="col-sm-6"><button class="btn btn-default bt-icon" id="btRemoveAttachment_'.concat(t[i],'" type="button" onclick="Miro.removeAttachment(').concat(t[i],')"><i class="fa fa-times-circle"></i></button><a href="#" onclick="Miro.downloadAttachment(').concat(t[i],')"> ').concat(n[i],"</a></div>").concat(a,"</div>")).insertBefore("#endAttachList")}}),Shiny.addCustomMessageHandler("gms-fitTitleInBox",function(e){setTimeout(function(){var t=$(e),n=t.parent()[0];t.css("font-size","18px");for(var i=18;n.scrollWidth>n.clientWidth&&i>=10;)i-=2,t.css("font-size","".concat(i,"px"))},500)}),Shiny.addCustomMessageHandler("gms-showValidationErrors",function(e){var t=Object.keys(e);$(".input-validation-error").empty(),t.forEach(function(t){Array.isArray(e[t])?e[t].forEach(function(e){$("#valErr_".concat(t)).append(e)}):$("#valErr_".concat(t)).append(e[t])}),$(".input-validation-error").show()});var e=new Shiny.InputBinding;$.extend(e,{find:function(e){return $(e).find(".miro-auto-numeric")},getValue:function(e){return parseFloat($(e).autoNumeric("get"))},setValue:function(e,t){$(e).autoNumeric("set",t)},receiveMessage:function(e,t){Object.prototype.hasOwnProperty.call(t,"value")&&$(e).autoNumeric("set",t.value)},subscribe:function(e,t){$(e).on("change.autoNumericBinding",function(){t(!0)})},getRatePolicy:function(){return{policy:"debounce",delay:250}},initialize:function(e){$(e).autoNumeric("init")},unsubscribe:function(e){$(e).autoNumeric("destroy")}}),Shiny.inputBindings.register(e)});var H=1;$(document).keyup(function(e){if(13!==e.keyCode||e.ctrlKey)if(27!==e.keyCode){if(e.ctrlKey&&e.altKey)if(73!==e.keyCode)if(83!==e.keyCode)if(13!==e.keyCode)if(82!==e.keyCode)if(67!==e.keyCode)if(67!==e.keyCode){if(70===e.keyCode)return $("body").toggleClass("sidebar-collapse"),void I(400);if(49!==e.keyCode)if(50!==e.keyCode)if(51!==e.keyCode)if(52!==e.keyCode)if(53!==e.keyCode){if(84!==e.keyCode)return 39===e.keyCode?(Shiny.onInputChange("tabsetShortcutNext",H),void(H+=1)):37===e.keyCode?(Shiny.onInputChange("tabsetShortcutPrev",H),void(H+=1)):40===e.keyCode?(Shiny.onInputChange("tabsetShortcutNest",H),void(H+=1)):38===e.keyCode?(Shiny.onInputChange("tabsetShortcutUnnest",H),void(H+=1)):void(32===e.keyCode&&$("#btCompareScen").is(":enabled")&&$("#btCompareScen").is(":visible")&&$("#btCompareScen").click());if($("#btGraphIn").is(":visible"))return void $("#btGraphIn:enabled").click();if($("#outputTableView").is(":visible"))return void $("#outputTableView").click();for(var t=2;t<=53;t+=1)$("#table_".concat(t,":visible")).click()}else{var n=$('a[href="#shiny-tab-hcubeAnalyze"]');n.length>0&&n.click()}else $('a[href="#shiny-tab-scenarios"]').click();else{var i=$('a[href="#shiny-tab-gamsinter"]');i.length>0?i.click():$('a[href="#shiny-tab-loadResults"]').click()}else{var a=$('a[href="#shiny-tab-outputData"]');a.length>0?a.click():$('a[href="#shiny-tab-importData"]').click()}else $('a[href="#shiny-tab-inputData"]').click()}else for(var o=2;o<=50;o+=1)$("#close_".concat(o,":visible")).click();else $(".btRemove:visible").click();else Shiny.setInputValue("btDelete",1,{priority:"event"});else $("#btSolve:visible:enabled").click();else Shiny.setInputValue("btSave",1,{priority:"event"});else $("#btImport").is(":visible")?$("#btImport").click():$("#btLoadScen").is(":visible")&&$("#btLoadScen").click()}else $(".modal").modal("hide");else{if($("#shiny-modal").find(".selectize-input.input-active").length>0||$("#shiny-modal").find('*[data-dismiss="modal"]').is(":focus"))return;$(".bt-gms-confirm:visible:enabled").click()}})}]);
//# sourceMappingURL=miro.js.map