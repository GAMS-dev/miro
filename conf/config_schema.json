{ 
    "$schema"           : "http://json-schema.org/draft-07/schema#",
    "title"             : "Configuration file schema",
    "description"       : "GAMS WebUI configuration file schema",
    "type"              : "object",
    "additionalProperties": false,
    "properties"        : {
        "language"          : {
            "description"       : "default language for WebUI",
            "type"              : "string",
            "default"           : "en",
            "enum"              : ["de", "en"],
            "required"          : false
        },
        "pageSkin"          : {
            "description"       : "Skin used for shiny dashboard",
            "type"              : "string",
            "enum"              : ["black", "blue", "purple", "green", "red", "yellow"],
            "default"           : "black",
            "required"          : false
        },
		"excelIncludeMeta"  : {
			"description"		: "Boolean which specifies whether to include a metadata sheet in the Excel file (exporting a scenario)",
			"type"				: "boolean",
			"default"			: true, 
			"required"			: false
		},
		"excelIncludeEmptySheets" : {
		  "description"		: "Boolean which specifies whether to include empty sheets in the Excel file",
			"type"				: "boolean",
			"default"			: true, 
			"required"			: false
		},
		"UILogo":{
		  "description"		: "String that specifies the name of the logo to use",
			"type"				: "string",
			"minLength"         : 1,
			"default"			: "gams_logo.png", 
			"required"			: false
		},
		"autoGenInputGraphs"  : {
			"description"		: "Boolean which specifies whether to generate graphs for each input sheet automatically",
			"type"				: "boolean",
			"default"			: true, 
			"required"			: false
		},
		"defCompMode": {
		  "description"		: "Specifies the default scenario comparison mode (the one that is loaded on startup).",
		  "type"			: "string",
			"enum"              : ["split", "tab"],
			"default"			: "split", 
			"required"			: false
		},
		"activateModules"	: {
			"description"			: "Activate/deactivate certain modules",
			"type"					: "object",
			"additionalProperties"	: false,
			"properties"			: {
				"scenario"				: {
					"description"			: "Boolean which specifies whether to activate scenario functionality",
					"type"					: "boolean",
					"default"				: true,
					"required"				: false
				},
				"strictmode"			: {
					"description"			: "Boolean which specifies whether app is to be launched in strict mode, resulting in throwing error messages instead of accepting possibly faulty user entries",
					"type"					: "boolean",
					"default"				: true,
					"required"				: false
				},
				"loadLocal" :{
				  "description"			    : "Boolean which specifies whether local data upload module should be activated or not",
					"type"					: "boolean",
					"default"				: true,
					"required"				: false
				},
				"sharedScenarios":{
				  "description"			    : "Boolean which specifies whether scenarios can be shared between different users",
					"type"					: "boolean",
					"default"				: true,
					"required"				: false
				},
				"batchMode":{
				  "description"		: "Boolean which specifies whether scenarios should be solved in batch mode or not",
					"type"					: "boolean",
					"default"				: false,
					"required"				: false
				},
				"logFile:": {
				  "description"		: "Boolean which specifies whether log file should be visible in UI",
					"type"					: "boolean",
					"default"				: true,
					"required"			: false
				},
				"lstFile:": {
				  "description"		: "Boolean which specifies whether log file should be visible in UI",
					"type"					: "boolean",
					"default"				: true,
					"required"			: false
				}
			}
		},
		"aggregateWidgets"    : {
		  "description"			: "Whether to aggregate all input widgets on a single tab",
			"type"					: "object",
			"additionalProperties"	: false,
			"properties"			: {
				"title"				: {
					"description"			: "Title of the tab",
					"type"				    : "string",
					"minLength"             : "1",
					"required"				: false
				}
			}
		},
		"saveTraceFile" : {
		  "description"		: "Boolean which specifies whether trace file should be saved",
					"type"					: "boolean",
					"default"				: false,
					"required"			: false
		},
        "dataRendering"     : {
            "description"       : "Format in which input or output data is to be displayed in the WebUI.",
            "type"              : "object",
            "additionalProperties": {
                "type"              : "object",
                "minProperties"     : 1,
                "oneOf"             : [
                    {
                        "properties"        : {
                            "outType"               : {
                                "description"           : "Style of widget (table, pivottable, graph, graph+table).",
                                "type"                  : "string",
                                "enum"                  : ["datatable"]
                            },
							"height"               : {
								"description"           : "Height of the output element.",
								"type"                  : "integer",
								"minimum"               : 0,
								"default"               : null
							}
                        },
                        "additionalProperties": false,
                        "required"          : ["outType"]
                    },
                    {
                        "properties"        : {
                            "outType"               : {
                                "description"           : "Style of widget (table, pivottable, graph, graph+table).",
                                "type"                  : "string",
                                "enum"                  : ["valueBox"]
                            },
                            "options":{
                              "width"               : {
                								"description"           : "Width of the output element.",
                								"type"                  : "integer",
                								"minimum"               : 0,
                								"default"               : 4
                							},
                							"color" :{
                							  "type":"string",
                							   "description": "Background color of value box",
                							   "minLength":0,
                							   "default": "aqua"
                							},
                							"icon":{
                							  "description":"icon for value box",
                							  "type": "object",
                							  "properties":{
                							    "name": {
                							      "type":"string",
                							      "description": "Name of icon. Icons are drawn from the Font Awesome and Glyphicons libraries.",
                							      "minLength":0,
                							      "default": null
                							      },
                							    "lib":{
                							      "type":"string",
                							      "description": "Name of library where icon is from.",
                							      "enum":["glyphicon", "font-awesome"],
                							      "default": "font-awesome"
                							    }
                							  }
                              }
                            }
                        },
                        "additionalProperties": false,
                        "required"          : ["outType"]
                    },
                    {
                        "properties"        : {
                            "outType"               : {
                                "description"           : "Style of widget (table, pivottable, graph, graph+table).",
                                "type"                  : "string",
                                "enum"                  : ["pivot"]
                            },
                            "height"               : {
                                "description"           : "Height of the output element.",
                                "type"                  : "integer",
                                "minimum"               : 0,
                                "default"               : null
                            },
                            "pivottable"            : {
                                "description"           : "Parameters used to customize pivottable (used to render input or output data).",
                                "type"                  : "object",
                                "properties"            : {
                                    "rows"              : {
                                        "description"           : "Array of the names of columns in the data.frame to prepopulate the rows of the pivot table.",
                                        "type"                  : "array",
                                        "uniqueItems"           : true,
                                        "minItems"              : 1,
                                        "items"                 : {
                                            "type"                  : "string",
                                            "minLength"             : 1
                                        },
                                        "default"               : null
                                    },
                                    "cols"              : {
                                        "description"           : "Array of the names of columns in the data.frame to prepopulate the columns of the pivot table.",
                                        "type"                  : "array",
                                        "uniqueItems"           : true,
                                        "minItems"              : 1,
                                        "items"                 : {
                                            "type"                  : "string",
                                            "minLength"             : 1
                                        },
                                        "default"               : null
                                    },
                                    "aggregatorName"    : {
                                        "description"       : "Aggregator to use (see enum for list of possible aggregators)",
                                        "type"              : "string",
                                        "enum"              : ["Count", "Count Unique Values", "List Unique Values", "Sum", "Integer Sum", "Average", "Median", "Sample Variance", "Sample Standard Deviation", "Minimum", "Maximum", "First", "Last", "Sum over Sum", "80% Upper Bound", "80% Lower Bound", "Sum as Fraction of Total", "Sum as Fraction of Total", "Sum as Fraction of Rows", "Sum as Fraction of Columns", "Count as Fraction of Total", "Count as Fraction of Rows", "Count as Fraction of Columns"],
                                        "default"           : "Count"
                                    },
                                    "vals"              : {
                                        "description"       : "String name of the column in the data.frame to use with aggregatorName. Must be additive (i.e a number).",
                                        "type"              : "string",
                                        "minLength"         : 1,
                                        "default"           : null
                                    },
                                    "rendererName"      : {
                                        "description"       : "Name of the renderer selected, e.g. Table, Heatmap, Treemap etc",
                                        "type"              : "string",
                                        "enum"              : ["Table", "Table Barchart", "Heatmap", "Row Heatmap", "Col Heatmap", "Treemap", "Horizontal Bar Chart", "Horizontal Stacked Bar Chart", "Bar Chart", "Stacked Bar Chart", "Line Chart", "Area Chart", "Scatter Chart"],
                                        "default"           : "Table"
                                    },
                                    "locale"             : {
                                        "description"       : "Localization options",
                                        "type"              : "string",
                                        "enum"              : ["cs", "da", "de", "es", "fr", "it", "nl", "pl", "pt", "ru", "sq", "tr", "zh"],
                                        "default"           : "en"
                                    },
                                    "readonly"          : {
                                        "description"       : "Logical this optional parameter allows use of the pivottable subtotal plugin. Using this parameter will set all renderer names to the english locale.",
                                        "type"              : "boolean",
                                        "default"           : false
                                    },
                                    "width"             : {
                                        "description"       : "width of pivottable",
                                        "type"              : "integer",
                                        "minimum"           : 1,
                                        "default"           : null
                                    },
                                    "height"            : {
                                        "description"       : "height of pivottable",
                                        "type"              : "integer",
                                        "minimum"           : 1,
                                        "default"           : null
                                    }
                                }
                            }
                        },
                        "additionalProperties": false,
                        "required"          : ["outType"]
                    },
                    {
                        "properties"        : {
                            "outType"               : {
                                "description"           : "Style of widget (table, pivottable, graph, graph+table).",
                                "type"                  : "string",
                                "enum"                  : ["dtGraph", "graph"]
                            },
                            "height"               : {
                                "description"           : "Height of the output element.",
                                "type"                  : "integer",
                                "minimum"               : 0,
                                "default"               : null
                            },
                            "graph"                 : {
                                "type"                  : "object",
                                "description"           : "Graph display options",
                                "properties"            : {
                                    "tool"                  : {
                                        "type"                  : "string",
                                        "enum"                  : ["plotly", "dygraph"],
                                        "required"              : true
                                    }
                                },
                                "required"              : ["tool"]
                            }
                        },
                        "additionalProperties"      : false,
                        "required"                  : ["outType", "graph"]
                    },
					{
						"properties"        : {
                            "outType"               : {
                                "description"           : "Custom style.",
                                "type"                  : "string",
                                "minLength"				: 2,
								"not": {
									"enum"					: ["graph", "dtGraph", "datatable", "pivot"]
								}
                            },
							"packages"				: {
								"description"			: "Packages that need to be installed",
								"type"					: "array",
								"minItems"				: 1,
								"uniqueItems"			: true,
								"items"					: {
									"type"					: "string",
									"minLength"				: 2
								}
							}
						},
						"required"          : ["outType"]
					}
                ]
            }
        },
        "roundingDecimals"  : {
            "description"       : "Number of decimal places used for rounding output values.",
            "type"              : "integer",
            "minimum"           : 0,
            "maximum"           : 6,
            "default"           : 2,
            "required"          : false
        },
        "handsontable"      : {
            "description"       : "Parameters used to customize handsontables (spreadsheet like js-editor used to modify nput data).",
            "type"              : "object",
            "required"          : false,
            "properties"        : {
                "height"            : {
                    "description"       : "Height of handsontable.",
                    "type"              : "integer",
                    "exclusiveMinimum"  : 0,
                    "default"           : 700,
                    "required"          : false
                },
                "width"             : {
                    "description"       : "Width of handsontable.",
                    "type"              : "integer",
                    "exclusiveMinimum"  : 0,
                    "default"           : null,
                    "required"          : false
                },
                "readonly"          : {
                    "description"       : "Defines whether handsontable can not be modified.",
                    "type"              : ["boolean", "null"],
                    "default"           : null,
                    "required"          : false
                },
                "search"            : {
                    "description"       : "Defines whether handsontable can be accessed via search in browser.",
                    "type"              : "boolean",
                    "default"           : true,
                    "required"          : false
                },
                "highlightCol"      : {
                    "description"       : "Defines whether column of current active cell is highlighted.",
                    "type"              : "boolean",
                    "default"           : true,
                    "required"          : false
                },
                "highlightRow"      : {
                    "description"       : "Defines whether row of current active cell is highlighted.",
                    "type"              : "boolean",
                    "default"           : true,
                    "required"          : false
                },
                "rowHeaderWidth"    : {
                    "description"       : "Width of the row number/row header column.",
                    "type"              : "integer",
                    "exclusiveMinimum"  : 0,
                    "default"           : null,
                    "required"          : false
                },
                "enableComments"    : {
                    "description"       : "Enable comments in table. Will be ignored when solving the model.",
                    "type"              : "boolean",
                    "default"           : true,
                    "required"          : false
                },
                "stretchH"          : {
                    "description"       : "Specifies whether table is stretched to full box width.",
                    "type"              : "string",
                    "enum"              : ["none", "last", "all"],
                    "default"           : "all",
                    "required"          : false
                },
                "columnSorting" 	: {
                    "description"       : "Defines whether columns can be sorted in ascending/descending order (by clicking on column name in header row).",
                    "type"              : "boolean",
                    "default"           : true,
                    "required"          : false
                },
                "manualColumnMove"  : {
                    "description"       : "Defines whether columns can be manually moved (changed position).",
                    "type"              : "boolean",
                    "default"           : false,
                    "required"          : false
                },
                "manualColumnResize": {
                    "description"       : "Defines whether columns can be manually resized.",
                    "type"              : "boolean",
                    "default"           : false,
                    "required"          : false
                },
                "colWidths"         : {
                    "description"       : "Width of columns.",
                    "type"              : "integer",
                    "exclusiveMinimum"  : 0,
                    "default"           : null,
                    "required"          : false
                },
                "fixedColumnsLeft"  : {
                    "description"       : "Number of columns fixed on the left.",
                    "type"              : "integer",
                    "exclusiveMinimum"  : 0,
                    "default"           : null,
                    "required"          : false
                },
				"contextMenu"		: {
					"description"		: "Options for customizing the handsontable context menu (accessible via right mouse click)",
					"type"				: "object",
					"additionalProperties": false,
					"required"			: "false",
					"properties"		: {
						"enabled"			: {
							"description"       : "Defines whether context menu is activated (using right mouse click).",
							"type"              : "boolean",
							"default"           : true,
							"required"          : false
						},
						"allowRowEdit"		: {
							"description"		: "logical enabling row editing",
							"type"				: "boolean",
							"default"			: true
						},
						"allowColEdit"		: {
							"description"		: "logical enabling column editing. Note that Handsontable does not support column add/remove when column types are defined (i.e. useTypes == TRUE in rhandsontable).",
							"type"				: "boolean",
							"default"			: true
						},
						"allowReadOnly"		: {
							"description"		: "logical enabling read-only toggle",
							"type"				: "boolean",
							"default"			: false
						},
						"allowComments"     : {
							"description"       : "Enable comments in table. Will be ignored when solving the model.",
							"type"              : "boolean",
							"default"           : true
						}
					}
				}
            }
        },
		"pivottable"            : {
            "description"           : "Parameters used to customize pivottable (used to render output data).",
            "type"                  : "object",
			"additionalProperties"	: false,
            "properties"        : {
				"bgColor"			: {
					"description"		: "Background color (of row and column headers)",
					"type"				: "string",
					"required"			: false,
					"default"			: "#ffffff"
				}
			}
		},
        "datatable"             : {
            "description"           : "Parameters used to customize datatable (used to render output data).",
            "type"                  : "object",
			"additionalProperties"	: false,
            "properties"            : {
				"class"					: {
					"description"			: "css classes used for styling datatable",
					"type"					: ["array", "string"],
					"minItems"				: 1,
					"minLength"				: 1,
					"default"				: "display",
					"required"				: false					
				},
				"filter"				: {
					"description"			: "Whether and where to include column filters",
					"type"					: "string",
					"enum"					: ["none", "bottom", "top"],
					"default"				: "bottom",
					"required"				: false
				},
				"rownames"				: {
					"description"			: "Boolean that specifies whether to show row names",
					"type"					: "boolean",
					"required"			: false,
					"default"				: false
				},
				"extensions"			: {
					"description"			: "For a list of supported extensions see: https://rstudio.github.io/DT/extensions.html",
					"type"					: "array",
					"uniqueItems"			: true,
					"required"				: false,
					"items"					: {
						"type"					: "string",
						"enum"					: ["AutoFill", "Buttons", "ColReorder", "ColVis", "FixedColumns", "FixedHeader", "KeyTable", "Responsive", "RowReorder", "Scroller", "Select"]
					}						
				},
                "options"               : {
                    "description"           : "Additional options (e.g. column specific).",
                    "type"                  : "object",
                    "required"              : false,
                    "properties"            : {
						"dom"					: {
							"description"			: "Defines where the table control elements appear (position) and in what order",
							"type"					: "string",
							"minLength"				: 1,
							"required"				: false
						},
						"buttons"				: {
							"description"			: "Buttons or groups of buttons to insert",
							"type"					: "object",
							"required"				: false,
							"default"				: null
						},
						"pageLength"			: {
							"description"			: "Number of items to display per page",
							"type"					: "integer",
							"minimum"				: 1,
							"default"				: 15,
							"required"				: false
						},
                        "columnDefs"            : {
                            "description"           : "Column specific options.",
                            "type"                  : "array",
                            "uniqueItems"           : true,
                            "items"                 : {
                                "type"                  : "object",
                                "properties"            : {
                                    "targets"               : {
                                        "required"              : true,
                                        "anyOf": [
                                            {
                                                "description"       : "Column numbers to refer to.",
                                                "type"              : "array",
                                                "minItems"          : 1,
                                                "items"             :{
                                                    "type"              : "integer",
                                                    "minimum"           : 1
                                                }   
                                            }, 
                                            {
                                                "description"       : "Use _all_ to refer to all the columns",
                                                "type"              : "string",
                                                "minLength"         : 1
                                            }
                                        ]
                                    
                                    },
                                    "className"             : {
                                        "required"              : false,
                                        "type"                  : "string",
                                        "minLength"             : 1
                                    },
									"visible"            	: {
                                        "required"              : false,
                                        "type"                  : "boolean"
                                    },
									"searchable"      	    : {
                                        "required"              : false,
                                        "type"                  : "boolean"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
