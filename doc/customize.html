<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<head>
    <title>MIRO - Configuration</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/lightbox/dist/ekko-lightbox.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">
    <!-- Spectrum ColorPicker plugin -->
    <link rel="stylesheet" href="assets/plugins/spectrum/spectrum.css">
    <!-- bootstrap datetimepicker plugin -->
    <link rel="stylesheet" href="assets/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css">
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
    <!-- alpaca -->
    <link type="text/css" href="assets/css/alpaca.min.css" rel="stylesheet"/>

</head>

<body class="body-blue">
    <!--#include virtual="/wbody.html" -->
    <div class="page-wrapper">
       
        <!--TYPO3SEARCH_begin-->
        
        <!-- ******Header****** -->
        <header id="header" class="sub-header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                          <!-- <img class="img-fluid" style="height:50px;" src="assets/images/logo.svg" onerror="this.onerror=null; this.src='assets/images/logo.png'" alt="logo"/> -->
                            <span class="text-highlight">GAMS</span><span class="text-bold">MIRO</span>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Configuration</li>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><span aria-hidden="true" class="icon icon_tools"></span> Configuration</h1>
                </div><!--//doc-header-->
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="intro" class="doc-section">
                                <h2 class="section-title">Introduction</h2>
                                <div class="section-block">
                                    <p>In this section you will learn how to customize GAMS MIRO. As you saw previously when creating your first app, MIRO works without any further configuration. However, you will notice that there are a multitude of configuration options that allow you to shape MIRO to fit your particular model.<br>
                                    The entire configuration of MIRO is handled via JSON files. These files are located inside the folder <span class="code">&lt;modeldirectory&gt;/conf</span> of your GAMS model. Two JSON files are used: </p>
                                    <ol class="list">
                                      <li><h6>&lt;modelname&gt;_io.json</h6>
                                    This <a href="./faqs.html#file-io">file</a> is generated automatically each time a GAMS model is run with the command line parameter <span class="code" style="white-space:nowrap;">miro=build</span> or <span class="code" style="white-space:nowrap;"><nobr>miro=launch</nobr></span>. 
                                    It lists those GAMS symbols that are marked in your GAMS model with the <code class="language-gams">$onExternalInput
                                    </code> / <code class="language-gams">$offExternalInput
                                    </code> and <code class="language-gams">$onExternalOutput
                                    </code> / <code class="language-gams">$offExternalOutput
                                    </code> tags. You won't ever have to modify this file!
                                  </li>
                                  <li>
                                    <h6>&lt;modelname&gt;.json</h6>
                                    All the customization of MIRO happens via the other JSON file <a href="./faqs.html#file-config"><span class="code">&lt;modelname&gt;.json</span></a>, e.g. <span class="code">trnsport.json</span>. Here you can configure the general appearance of MIRO, the functionality, the language and much more. Furthermore, all the graphics and widgets are specified here.
                                  </li>
                                </ol>
                                    <div class="section-block">
                                        <img class="img-fluid" style= "max-height:350pt; display: block; margin-left: auto; margin-right: auto;" src="assets/images/config-img.png" alt="Custom visualization options"/>
                                    </div>
                                  <p>GAMS MIRO offers comprehensive visualization options. Some basic diagram types are already pre-implemented and only need to be configured, i.e. adapted to your model-specific data. The selection of these pre-implemented graphics currently includes charts (line charts, histograms, pie charts, pivot tables) and is constantly being expanded.</p>
                                    <p>To create graphics that are perfectly tailored to your data, you can use MIRO's R-API. More information can be found <a href="#custom-renderers" class="scrollto">here</a>.
                                    </p>
                                    <p>Before MIRO is started, both JSON files are validated in the background against a schema. If this schema is violated by either one of these files, an error message is displayed.</p>
                                    </div><!--//section-block-->
                            </section>
                            <section id="input-widgets" class="doc-section">
                                <h2 class="section-title">Input widgets</h2>
                                <div class="section-block">
                                  <p>Let's get back and extend our demo model <i>trnsport</i>. We will do this by adjusting the file <span class="code">trnsport.json</span> in order to to adapt MIRO to our needs.
                                  When you first launch MIRO for a new model, the <span class="code">trnsport.json</span> file is almost empty:</p>
                                  <div class="code-block" id="config-start">
                                          <pre><code class="language-json">{}</code></pre>
                                  </div><!--//code-block-->
                                  <p>Each adjustment we want to make must be captured within the curly braces of this file. How this can look in detail, we will see in this section.</p>
                                </div><!--//section-block-->
                                <div class="section-block" id="widgets-tables">
                                  <h3 class="block-title">Tables</h3>
                                    <p>GAMS MIRO comes with several options on how you can feed your <a href="faqs.html#def-model" target="_blank">model</a> with input data. By default, GAMS input parameters, sets and scalars are displayed in an editable table: </p>
                                    <div class="section-block">
                                        <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto; max-height:125pt;" src="assets/images/editable-table.png" alt="editable table"/>
                                    </div>
                                    <p>The corresponding GAMS declaration statement looks like this: <code class="language-gams">Parameter d(i,j) 'distance in thousands of miles';</code>. 
                                    By default, every cell in the table is editable and rows can be inserted and removed. If you only want to allow your users to edit certain tables or even only certain columns within a table, you can customize the visualization for the underlying GAMS parameter. 
                                    You do so by adding this kind of information to the <span class="code">trnsport.json</span> file. For example, if we decide that the table for our parameter <span class="code">d</span> should not be editable, this information needs to be added to your JSON file as follows:</p>
                                      <div class="code-block" id="table-readonly">
                                          <pre><code class="language-json">{
  &#x22;inputWidgets&#x22;: {
    &#x22;d&#x22;: {
      &#x22;widgetType&#x22;: &#x22;table&#x22;,
      &#x22;readonly&#x22;: true
    }
  }
}</code></pre>
                                      </div><!--//code-block-->
                                      <p>There are two ways to get to this block of JSON data:</p>
                                      <ol>
                                        <li>By manually editing the <i>trnsport.json</i> file
                                        <br>If you decide to use this method, you need to be careful that the content you add matches the schema.</li>
                                        <li>Use of the <a href="./configgen.html">Configuration Generator</a>
                                        <br>The Configuration Generator can be used to automatically generate the JSON code for the desired configuration. You can simply replace the file created by the configuration generator with your existing one; or copy code excerpts and merge them with your current configuration.</li>
                                      </ol>
                                      <p>When we add the configuration shown above, we will be able to see our model's distance matrix <span class="code">d</span>, but can not edit it.</p>
                                    <div class="callout-block callout-success">
                                        <div class="icon-holder">
                                            <i class="fas fa-thumbs-up"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <h4 class="callout-title">Tip:</h4>
                                            <p>You can use our <a href="./configgen.html">Configuration Generator</a> to customize your input widgets.</p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                </div><!--//section-block-->
                                <div class="section-block" id="widgets-scalars">
                                  <h3 class="block-title">Scalars</h3>
                                  <p><a href="https://www.gams.com/latest/docs/UG_DataEntry.html#UG_DataEntry_Scalars" target="_blank">Scalars</a> and <a href="https://www.gams.com/latest/docs/UG_SetDefinition.html#UG_SetDefinition_SingletonSets" target="_blank">Singleton Sets</a> (in the following both referred to as <i>scalar values</i> or simply <i>scalars</i>) are special in the sense that they will not be displayed in one separate table for each scalar value. Instead, they are combined into a single table called <span class="code">scalars</span>. This saves screen real estate and also makes adding new scalars easy as all you have to do is add a new row to the <span class="code">scalars</span> table. Thus, it improves compactness and flexibility - especially when MIRO is connected to a database as the schema stays fixed even when you add or remove certain scalars.</p>
                                    <p>Instead of displaying scalars in tabular form, you can use sliders, dropdown menus, checkboxes and more to populate your models.</p>
                                      <div class="section-block" style="text-align:center;">
                                          <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto;" src="assets/images/input-widgets2.png" alt="Input widgets for scalar values"/>
                                      </div>
                                      <p>As with all MIRO customizations, the information about the type of visualization of a GAMS scalar is configured via the file <span class="code">&lt;modelname&gt;.json</span>.
                                      <br>Let's get back to our <i>trnsport</i> app. In the <a href="#table-readonly" class="scrollto">previous section</a> we configured the table of parameter <span class="code">d</span> so that it is no longer editable. We achieved this by writing the corresponding information into the <span class="code">trnsport.json</span> file. 
                                      Now we extend the configuration of our app further by adding information about how to display the scalar value <span class="code">f</span> ('<i>freight in dollars per case per thousand miles</i>'). Instead of displaying it in a table, we want to use a <i>slider</i>:
                                      </p>
                                      <div class="code-block" id="scalar-slider">
                                          <pre><code class="language-json">{
  &#x22;inputWidgets&#x22;: {
    &#x22;d&#x22;: {
      &#x22;widgetType&#x22;: &#x22;table&#x22;,
      &#x22;readonly&#x22;: true
    },
    &#x22;f&#x22;: {
      &#x22;widgetType&#x22;: &#x22;slider&#x22;,
      &#x22;alias&#x22;: &#x22;Freight in dollars per case per thousand miles&#x22;,
      &#x22;label&#x22;: &#x22;Select the freight costs&#x22;,
      &#x22;min&#x22;: 1,
      &#x22;max&#x22;: 500,
      &#x22;default&#x22;: 90,
      &#x22;step&#x22;: 1
    }
  }
}</code></pre>
                                      </div><!--//code-block-->
                                      <p>Again, this can be done either by manually editing the JSON file or via the Configuration Generator.</p>
                                      <p>When we restart our app, the scalar is now automatically removed from the <i>Scalars</i> table and instead rendered as a separate widget:</p>
                                      <div class="section-block" style="text-align:center;">
                                          <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto; max-height:60pt;" src="assets/images/trnsport-slider.png" alt="Input widgets for scalar values"/>
                                      </div>
                                    <div class="callout-block callout-success">
                                        <div class="icon-holder">
                                            <i class="fas fa-thumbs-up"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <h4 class="callout-title">Tip:</h4>
                                            <p>In case you want each widget to be displayed on a separate sheet, there is an option to do so: <span class="code">"aggregateWidgets"</span>.</p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                </div><!--//section-block-->
                                <div class="section-block" id="widgets-commandLine">
                                  <h3 class="block-title">Command line parameters</h3>
                                     <p>We have already mentioned the possibility of <a href="./model.html#command-line">setting GAMS command line parameters via MIRO</a>. 
                                     Since <a href="https://www.gams.com/latest/docs/UG_GamsCall.html#UG_GamsCall_SpecifyingOptionsThroughTheCommandLine" target="_blank">GAMS Options</a> and <a href="https://www.gams.com/latest/docs/UG_GamsCall.html#UG_GamsCall_DoubleDashParametersEtcSimpleExample" target="_blank">Double Dash Parameters</a> are specified via the command line in GAMS, they can not be tagged in the GAMS code with <code class="language-gams">$onExternalInput
                                     </code> / <code class="language-gams">$offExternalInput
                                     </code>. To be able to set them from MIRO, they must be specified in the <span class="code">&lt;modelname&gt;.json</span> file. In order for MIRO to recognize whether your symbol is a double dash parameter or a GAMS option, you must prefix the symbol name with either <kbd>GMSPAR_</kbd> for double dash parameters or <kbd>GMSOPT_</kbd> for GAMS options.
                                     </p>
                                     <div class="callout-block callout-warning">
                                         <div class="icon-holder">
                                             <i class="fas fa-info-circle"></i>
                                         </div><!--//icon-holder-->
                                         <div class="content">
                                             <h4 class="callout-title">Note:</h4>
                                             <p>Command line parameters can not be displayed as a table, but only as a slider, dropdown menu, checkbox, date(-range) selector or textinput.</p>
                                         </div><!--//content-->
                                     </div><!--//callout-block-->
                                     <p>Let's assume you want MIRO to call your GAMS model with the double dash parameter <kbd>--numberPeriods</kbd>, which can be set to a value between 1 and 14. You also want to be able to select the MIP solver to use. 
                                     As you have licenses for CPLEX, Gurobi and XPRESS, you can only use either of these three solvers. Thus, your <span class="code">&lt;modelname&gt;.json</span> file could look as follows:</p>
                                     <div class="code-block">
                                           <pre><code class="language-json">{
  &#x22;inputWidgets&#x22;: {
    &#x22;GMSPAR_numberPeriods&#x22;: {
      &#x22;widgetType&#x22;: &#x22;slider&#x22;,
      &#x22;alias&#x22;: &#x22;Number of time periods&#x22;,
      &#x22;label&#x22;: &#x22;Select the number of time periods to solve&#x22;,
      &#x22;min&#x22;: 1,
      &#x22;max&#x22;: 14,
      &#x22;default&#x22;: 11,
      &#x22;step&#x22;: 1
    },
    &#x22;GMSOPT_mip&#x22;: {
      &#x22;widgetType&#x22;: &#x22;dropdown&#x22;,
      &#x22;alias&#x22;: &#x22;MIP Solver&#x22;,
      &#x22;label&#x22;: &#x22;Solver to use for MIP models&#x22;,
      &#x22;choices&#x22;: [
        &#x22;CPLEX&#x22;,
        &#x22;GUROBI&#x22;,
        &#x22;XPRESS&#x22;
      ],
      &#x22;multiple&#x22;: false,
      &#x22;selected&#x22;: &#x22;CPLEX&#x22;
    }
  }
}</code></pre>
                                       </div><!--//code-block-->                                    
                                       <p>The resulting interface in MIRO now looks as follows:</p>
                                       <div class="section-block" style="text-align:center;">
                                          <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto; max-height:125pt;" src="assets/images/input-widgets-command-line.png" alt="Input widgets for command line parameters"/>
                                       </div>
                                       <p>If a GAMS option or a double dash parameter is set via MIRO, your GAMS model will automatically be called with these command line parameters. Those values are therefore available to the GAMS model at <a href="https://www.gams.com/latest/docs/UG_GamsCall.html#UG_GamsCall_TwoPass" target="_blank">compile time</a>.
                                       If we set the double dash parameter <span class="code">numberPeriods</span> to 11 and for the GAMS option <span class="code">mip</span> we select CPLEX from within MIRO, then the GAMS model is run with: <pre><span class="code">gams &lt;modelname&gt;.gms --numberPeriods=11 MIP=CPLEX</span></pre></p>
                                       <p>You can generate the configuration for GAMS command line parameters the same way as scalar widgets for GAMS symbols manually or via our <a href="./configgen.html">Configuration Generator</a>.</p>
                                       <div class="callout-block callout-warning">
                                           <div class="icon-holder">
                                               <i class="fas fa-info-circle"></i>
                                           </div><!--//icon-holder-->
                                           <div class="content">
                                               <h4 class="callout-title">Warning:</h4>
                                               <p>The following GAMS options are reserved by GAMS MIRO and can not be used: <span class="code">idir1, idir2, curdir, trace, traceopt, miro</span></p>
                                           </div><!--//content-->
                                       </div><!--//callout-block-->
                                </div><!--//section-block-->
                                <div class="section-block" id="widgets-dependencies">
                                  <h3 class="block-title">Dependencies among widgets</h3>
                                  <p>One special feature of GAMS MIRO is that you can define interdependencies between different parameters. Scalars can take two forms of dependencies to other parameters: They can feed their attributes from them; and they can manipulate the content of those parameters. An example for this is the <span class="code">kport</span> model that comes with your MIRO installation (in case you selected to install the example models). Here, we have a set of scenarios that can be selected as well as a singleton set with the currently selected/active scenario. A singleton set is suited to be represented as a dropdown menu, hence we choose that type of widget here. We would like to filter our parameters based on the currently selected scenario so that we only see data that is relevant for this scenario (this type of dependency is also referred to as a <span class="code">backward dependency</span>). This means that in case scenario 1 is selected via our dropdown menu, we only want to display data relevant to scenario 1 to the user. Additionally, we want the choices of our dropdown menu to be the elements of all available scenarios (also referred to as a <span class="code">forward dependency</span>).</p>
                                  <div class="section-block">
                                      <img class="img-fluid gifplayer" style= "display: block; margin-left: auto; margin-right: auto;" src="assets/images/dd-filter.png" alt="Dropdown menu filters table"/>
                                  </div>
                                  <p>Similar dependencies can also be considered for sliders. An example is the <i>pickstock</i> model. Here, the number of stocks you can select for your portfolio can not be larger than the number of stocks in your dataset. Similarly, the number of days you can use to train your model must not be larger than the number of days you have in the stock price dataset. The slider attributes - namely the maximum value that can be selected - should change according to the price data the user uploads. Thus, we also have forward dependencies here.</p>
                                  <p>Of course you can configure those dependencies just like you configure everything else via our <a href="./configgen.html">Configuration Generator</a>. A table that shows the currently supported forms of dependencies for the different input widgets is shown below.</p>
                                  <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                              <th>Input widget type</th>
                                              <th>Forward dependency</th>
                                              <th>Backward dependency</th>
                                              <th>Example model</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                              <td>Dropdown menu</td>
                                              <td><i class="fas fa-check"></i></td>
                                              <td><i class="fas fa-check"></i></td>
                                              <td><span class="code">kport</span></td>
                                            </tr>
                                            <tr>
                                              <td>Slider</td>
                                              <td><i class="fas fa-check"></i></td>
                                              <td><i class="fas fa-times"></i></td>
                                              <td><span class="code">pickstock</span></td>
                                            </tr>
                                            <tr>
                                              <td>Checkbox</td>
                                              <td><i class="fas fa-times"></i></td>
                                              <td><i class="fas fa-times"></i></td>
                                              <td>-</td>
                                            </tr>
                                            <tr>
                                              <td>Date selector</td>
                                              <td><i class="fas fa-times"></i></td>
                                              <td><i class="fas fa-times"></i></td>
                                              <td>-</td>
                                            </tr>
                                            <tr>
                                              <td>Daterange selector</td>
                                              <td><i class="fas fa-times"></i></td>
                                              <td>(<i class="fas fa-check"></i>)</td>
                                              <td><span class="code">pickstock_live</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                  </div><!--//table-responsive-->
                                  <div class="callout-block callout-warning">
                                      <div class="icon-holder">
                                          <i class="fas fa-info-circle"></i>
                                      </div><!--//icon-holder-->
                                      <div class="content">
                                          <h4 class="callout-title">Note:</h4>
                                          <p>You need dependency support for a type of widget which is currently not available? Please feel free to contact us at: <a href="mailto:miro@gams.com" target="_blank">miro@gams.com</a>. You added dependency support for another type of widget yourself? Send us a pull request on <a href="TODO:ADD GITHUB LINK" target="_blank">GitHub</a>!</p>
                                      </div><!--//content-->
                                  </div><!--//callout-block-->
                                </div><!--//section-block-->
                                <div class="section-block" id="widgets-advanced">
                                  <h3 class="block-title">Advanced topics</h3>
                                   <p>We covered the basics of how to use widgets for your scalar inputs as well as command line parameters. Let's now take a look at how widgets that return two scalars instead of one are treated. Those widgets include a slider with two handles (also referred to as a slider range) and a date range selector:</p>
                                   <p>The lower value (or starting date of the date range) is postfixed with <kbd>_lo</kbd> and the upper value (or end date of the date range) is postfixed with <kbd>_up</kbd>. This means that if you specified a slider range for your double dash parameter <kbd>--RANGE</kbd>, you can access the lower value of the range with <kbd>%RANGE_LO%</kbd> and the upper value with <kbd>%RANGE_UP%</kbd> while <kbd>%RANGE%</kbd> will not be set at all. If you want to learn more about this, check out the <i>pickstock_live</i> model: Here, we specify a time window that we want to fetch stock data for. Thus, we define a new double dash parameter <kbd>--TW</kbd> that we want to be visualized in the form of a date range selector. We add the following JSON snippet to our <span class="code">pickstock_live.json</span> configuration file:</p>
                                    <pre><code class="language-json">[...]

Model transport / all /;

solve transport using lp minimizing z;
display x.l, x.m;


*new result parameter and scalar for visualization
Set scheduleHdr                     'schedule header' / 'cap', 'demand', 'quantities' /;

$onExternalOutput
Scalar    total_cost                'total transportation costs in thousands of dollars';

Parameter schedule(i,j,scheduleHdr) 'shipment quantities in cases';
$offExternalOutput

total_cost                 = z.l;
schedule(i,j,'cap')        = a(i);
schedule(i,j,'demand')     = b(j);
schedule(i,j,'quantities') = x.l(i,j);</code></pre>
                                </div><!--//section-block-->
                            </section>
                            <section id="custom-graph" class="doc-section">
                                <h2 class="section-title">Graphics Configuration</h2>
                                <div class="section-block"  id="graphics-intro">
                                  <p>In the section on <a href="./customize.html#input-widgets" class="scrollto">Input widgets</a>, we extended our demo model <i>trnsport</i> with a read-only table and a slider widget for a scalar value. Now we want to configure our first graph to visualize some results of a model run. 
                                  At first, we want to use a pre-implemented diagram. The following options are currently available for this purpose:</p>  
                                  <ul>
                                    <li>datatable</li>
                                    <li>histogram</li>
                                    <li>pie chart</li>
                                    <li>bar chart</li>
                                    <li>line chart</li>
                                    <li>scatter plot</li>
                                    <li>pivot table</li>
                                    </ul>   
                                </div><!--//section-block-->
                                <div class="section-block" id="graphics-charts">
                                  <h3 class="block-title">Charts</h3>
                                  <p>Let's create a bar chart that visualizes the trade relations between suppliers and markets.  
                                  In order to do so we need to define a GAMS parameter that provides the data of those trade relations. We extend our GAMS model as follows:</p>
                                  <pre><code class="language-gams">[...]

Model transport / all /;

solve transport using lp minimizing z;
display x.l, x.m;


*new result parameter and scalar for visualization
Set scheduleHdr                     'schedule header' / 'cap', 'demand', 'quantities' /;

$onExternalOutput
Scalar    total_cost                'total transportation costs in thousands of dollars';

Parameter schedule(i,j,scheduleHdr) 'shipment quantities in cases';
$offExternalOutput

total_cost                 = z.l;
schedule(i,j,'cap')        = a(i);
schedule(i,j,'demand')     = b(j);
schedule(i,j,'quantities') = x.l(i,j);</code></pre>                                  
                                  <p>When we first started to <a href="./model.html#trnsport-scalar-out">customize</a> our model we already defined the output scalar <span class="code">total_cost = z.l;</span>, so that we can see it in MIRO.
                                  Now we have another parameter <span class="code">schedule</span> which is declared between the <code class="language-gams">$onExternalOutput
                                  </code> / <code class="language-gams">$offExternalOutput
                                  </code> tags. It is calculated using the parameters <span class="code">a</span> and <span class="code">b</span> and the final levels of the variable <span class="code">x</span>  ('<span class="code">quantities</span>').
                                  The latter is relevant for our desired graphic, the other two serve here only as additional information that we can work with.
                                  <br>With this result parameter we can now generate a diagram. For any pre-implemented visualization options we can use the configuration generator. 
                                  There, we upload our <i>trnsport_io.json</i> file and choose <i>generate new configuration file"</i> Under the tab <i>Graphs</i> we select <i>graphs</i> again. Now we can configure the parameter <span class="code">schedule</span> as desired.
                                  We leave all other configurations as they are, click on <i>next</i> and then on <i>Download json</i>. The resulting <i>trnsport.json</i> file looks as follows:</p>
                                  <pre><code class="language-json">{
  "dataRendering"      : {
    "schedule": {
      "outType": "dtGraph",
      "graph": {
        "title": "Supplies composition",
        "tool": "plotly",
        "type": "bar",
        "barmode": "stack",
        "color": "canning plants",
        "margins": {
          "b": 0,
          "t": 0,
          "l": 0,
          "r": 0,
          "pad": 0
        },
        "xdata": "markets",
        "ydata": {
          "quantities":{
          "label": "canning plants",
          "mode": "markers"
          }
        },
        "xaxis": {
          "title": "markets",
          "showgrid": false,
          "showticklabels": true
        },
        "yaxis": {
          "title": "quantities",
          "showgrid": false,
          "zeroline": true,
          "showticklabels": true
        }
      }
    }
}</code></pre> 
                                  <p>Since we already have a <span class="code">trnsport.json</span> file in our model folder, we simply copy the newly generated code and paste it into the existing file at the appropriate location.</p>
                                  <p>Let's see whether our new diagram looks as desired. We launch the MIRO app for our <i>trnsport</i> model via <span class="code" style="white-space:nowrap;"><nobr>miro=launch</nobr></span> again and solve the model. In the results section we can find our new graph:</p>
                                  <div class="section-block">
                                      <img class="img-fluid" style= "max-height:275pt; display: block; margin-left: auto; margin-right: auto;" src="assets/images/custom-graphic.png" alt="Bar chart showing shipment quantities over markets" />
                                  </div>
                                  <p>That's it. We've created our first MIRO graph.</p>
                                  <p>Besides bar charts, we can create multiple other types of charts. Just try it out yourself! You are now able to explore the different options on your own. And if you are stuck, you can always visit our <a href="https://forum.gamsworld.org/" target="_blank">forum</a> and ask others for help.</p>
                                </div><!--//section-block-->
                                <div class="section-block" id="graphics-pivot">
                                  <h3 class="block-title">Pivot Tables</h3>
                                  <p>With the integrated pivot tool you can easily create and interactively process a variety of charts. Besides static tables, pivot tables and charts are the default tool to visualize your model input data. This means that when you launch a new MIRO app for the first time, you can already interactively explore your input data with the help of pivot tables and pivot charts. Note, however, that you should change this default setting when displaying large datasets. Pivot tables and charts do not perform well for parameters with more than 100,000 records.</p>
                                  <div class="section-block">
                                      <img class="img-fluid" style= "max-height:325pt;" src="assets/images/pivot-pickstock.png" alt="Pivot" />
                                  </div>
                                  <p><br><br>In the next section we will show you how to create really sophisticated graphics like the map you find in the demo <i>transport</i> model that comes with your MIRO installation:</p>
                                  <div class="section-block">
                                      <img class="img-fluid" style= "max-height:250pt;" src="assets/images/output-data_raw1.png" alt="Result of custom renderer - Map with markers" />
                                  </div>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->
                            <section id="custom-renderers" class="doc-section">
                                <h2 class="section-title">Custom Graphics</h2>
                                <div class="section-block">
                                    <p>GAMS MIRO allows you to use your own custom renderers for your datasets. Currently we only support the visualization of data, not the generation. We may add this feature at a later stage depending on the demand.</p>
                                    <p>In order to visualize a dataset, you will need to write two functions: a placeholder where your graphs etc. will later be rendered as well as the rendering function itself. To learn more about the concepts of this dual component approach, visit the website for the R Shiny framework that GAMS MIRO is based upon: <a href="https://shiny.rstudio.com/">https://shiny.rstudio.com/</a>. In particular, we are using <a href="https://shiny.rstudio.com/articles/modules.html" target="_blank">Shiny Modules</a> to realize the interface between MIRO and your custom renderer functions. The template for the two components of every custom renderer is as follows:</p>
                                    <div class="code-block">
                                        <pre><code class="language-r">
&#x3C;rendererName&#x3E;Output &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
}

render&#x3C;rendererName&#x3E; &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
}
                                        </code></pre>
                                    </div><!--//code-block-->
                                    <p>Note that you need to replace <span class="code">&lt;rendererName&gt;</span> with your preferred name. Let's go through this code step by step. As mentioned, for each custom renderer we need to specify two functions: one that generates the the placeholder and one that fills this placeholder with data. The name of the placeholder function must be postfixed with "<span class="code">Output</span>" and the name of the function that specifies the actual rendering must be prefixed with the keyword "<span class="code">render</span>". 
                                      Let's get back to our <i>trnsport</i> example. We would like to see the flow of goods visualized on a map. As there is currently no out-of-the-box rendering function for visualizing data on a map in MIRO, we need to write our own custom renderer which we name: <span class="code">transportMap</span>. Thus, our initial template looks like this:
                                    <div class="code-block">
                                        <pre><code class="language-r">transportMapOutput &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
}
renderTransportMap &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
}</code></pre>
                                    </div><!--//code-block-->
                                    <div class="callout-block callout-warning">
                                        <div class="icon-holder">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <h4 class="callout-title">Note:</h4>
                                            <p>R is case sensitive and the first letter after the <span class="code">render</span> keyword needs to be uppercase! Thus, if the name of your renderer starts with a lowercase letter, you need to convert it to uppercase in the <kbd>render*</kbd> function.</p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                    <p>Both functions take a number of parameters. Let's start with the placeholder function: Each custom renderer has its own ID. In order to avoid <a href="https://en.wikipedia.org/wiki/Name_collision" target="_blank">name collisions</a> with other custom renderers or functions of GAMS MIRO, we need to prefix our input and output elements with this ID. How should we prefix our custom input and output functions, though? Fortunately, Shiny provides us with the function: <kbd><a href="https://shiny.rstudio.com/reference/shiny/0.13.1/NS.html" target="_blank">NS()</a></kbd>. This function takes the ID of our custom renderer as its input and returns a function (functions that return functions are often called <i>closures</i> in R) that does the prefixing for us. Thus, whenever we want to specify a new input or output element, we simply hand the ID we would like to use for this element over to this prefixing function (which in our case is bound to the <kbd>ns</kbd> variable). We can also specify a height for our renderer as well as the path where the renderer files are located. We can also pass additional options to our renderer functions.</p>
                                    <p>Let's get back to our example. As we would like to visualize our optimized schedule on an interactive map, we choose the popular <a href="https://leafletjs.com" target="_blank">Leaflet</a> library. Fortunately, there is already an R/Shiny interface for this library: <a href="https://rstudio.github.io/leaflet/" target="_blank">Leaflet for R</a>. This R package comes with the two functions: <kbd>leafletOutput()</kbd> that generates the placeholder and <kbd>renderLeaflet()</kbd> that renders a Leaflet map object created by the <kbd>leaflet()</kbd> function which takes our dataframe as its first argument. So let's put the pieces together and extend our code:
                                      <div class="code-block">
                                          <pre><code class="language-r">transportMapOutput &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
  leafletOutput(ns(&#x22;map&#x22;), height = height)
}
renderTransportMap &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
  output$map &#x3C;- renderLeaflet(leaflet(data))
}</code></pre>
                                      </div><!--//code-block-->
                                      <p>Note that we used the aforementioned <kbd>ns()</kbd> function to prefix the ID (<span class="code">"map"</span>) that we chose for our Leaflet element. Just like any other placeholder element, the function <kbd>leafletOutput()</kbd> generates an element that can be accessed via the list-like <kbd>output</kbd> object.
                                      Inside our rendering function we assign this object the Leaflet map that is created by the <kbd>renderLeaflet()</kbd> function. In case you find the whole concept of having an output function, a rendering function, an output object etc. still very confusing, you should take a look at the <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/" target="_blank">offical tutorial series</a> for the Shiny framework. <br>
                                      To summarize: elements that generate data can be accessed by the <kbd>input</kbd> object; elements that transform data to some form of visualization via the <kbd>output</kbd> object and any user-specific information via the <kbd>session</kbd> object.
                                    </p><p>
                                      The data that you want to visualize is supplied to your rendering function by the <kbd>data</kbd> argument - an R <a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html">tibble</a>, a data structure that is very similar to a Data Frame. The function argument <kbd>path</kbd> is a string (a one-dimensional character vector) that specifies the absolute path to your <span class="code">customRenderer</span> directory. This is useful if you want to include external files in your custom renderer functions. Optional parameters that you want to pass to the renderer can be accessed via the argument <kbd>options</kbd> - a (nested) list. </p>
                                      <p>Now that we are familiar with the template that every custom renderer builds upon, we are still missing one fundamental concept so that we can use our custom renderer: binding the renderer to dataset(s) we wish to visualize.</p>
                                      <p>This binding of GAMS parameter to renderer function is specified - just like any other renderer binding - in the <span class="code">&lt;modelname&gt;.json</span> file; more precisely the <span class="code">dataRendering</span> section. Let's assume that in our transportation example the GAMS parameter that specifies the optimal schedule is defined as <span class="code">optSched(lngp, latp, lngm, latm, plant, market)</span> where <span class="code">(lngP,latP)</span> and <span class="code">(lngm, latm)</span> are the coordinates of the plants and markets respectively. Our <span class="code">trnsport.json</span> file should then look like this:
                                        <div class="code-block">
                                            <pre><code class="language-json">{
   &#x22;dataRendering&#x22;:{
      &#x22;optSched&#x22;:{
         &#x22;outType&#x22;:&#x22;transportMap&#x22;,
         &#x22;height&#x22;:&#x22;700&#x22;,
         &#x22;options&#x22;:{
            &#x22;title&#x22;:&#x22;Optimal transportation schedule&#x22;
         }
      }
   }
}</code></pre>
                                        </div><!--//code-block-->
                                        <p>You can also use our <a href="./configgen.html">Configuration Generator</a> to generate the configuration file.
                                      </p><p>As you can see we bound the GAMS parameter <span class="code">optSched</span> to our new custom renderer <span class="code">transportMap</span>. Furthermore, we specified a parameter: <span class="code">title</span> that can be accessed by our custom renderer via the <span class="code">options</span> list. </p>
                                      <p>If we decided to run our MIRO app now, we still would not be able to see anything other than a blank area. Thus, we will need to fill our renderer with some life:
                                        <div class="code-block">
                                            <pre><code class="language-r">transportMapOutput &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
  tagList(
    textOutput(ns(&#x22;title&#x22;)),
    leafletOutput(ns(&#x22;map&#x22;))
  )
}
renderTransportMap &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
  output$title &#x3C;- renderText(options$title)
  output$map   &#x3C;- renderLeaflet(leaflet(data) %&#x3E;%
                                  addTiles() %&#x3E;%
                                  addMarkers(~lngp, ~latp, label = ~plant)
  )
}</code></pre>
                                        </div><!--//code-block-->
                                       <p>We have added a new placeholder for the title. Note the use of the <kbd>tagList()</kbd> function. Since every R function has a single return value which is either the last evaluated expression of the function or the argument to the first <kbd>return()</kbd> function that is encountered in the function body, we need to return a list object. A <kbd>tagList()</kbd> is simply a list with an additional attribute to identify that the elements are html tags.</p><p>Within our rendering function, we set the title, add the default <a href="https://www.openstreetmap.org" target="_blank">OpenStreetMap</a> tiles as well as some markers for our plants.
                                      <div class="callout-block callout-success">
                                          <div class="icon-holder">
                                              <i class="fas fa-thumbs-up"></i>
                                          </div><!--//icon-holder-->
                                          <div class="content">
                                              <h4 class="callout-title">Note:</h4>
                                              <p>The syntax <kbd>~lngp</kbd> that you see here is simply a shorthand for <kbd>data$lngp</kbd> - the pipe operator <kbd>a(x) %&#x3E;% b(y)</kbd> a shorthand for <kbd>tmp &#x3C;- a(x); b(tmp, y)</kbd></p>
                                          </div><!--//content-->
                                      </div>
                                      If you run your app now, you will be able to see a map with markers at the coordinates of the plants as you specified them in your GAMS sets: <kbd>lngp</kbd> and <kbd>latp</kbd>. When you hover over the markers, you will be able to see the names of the plants as defined by the set: <kbd>plants</kbd>. You can see a screenshot of the result below:
                                      <div class="section-block">
                                          <img class="img-fluid" src="assets/images/custom-renderer-map.png" alt="Result of custom renderer - Map with markers" />
                                      </div>
                                      <p>You now know everything you need in order to get started writing your own custom renderers! Congratulations! In case you want to learn more, you can find a complete example of a custom renderer function in the <i>transport</i> model that comes with your MIRO installation. In case you create a new renderer that you would like to share so that others can benefit from your work as well, please <a href="mailto:miro@gams.com" target="_blank">contact us</a>!
                                      </p>
                                </div><!--//section-block-->
                              </section>
                              <section id="development-mode" class="doc-section">
                                  <h2 class="section-title">Advanced: Development mode and compilation phase</h2>
                                  <div class="section-block">
                                      <p>When GAMS MIRO is started via GAMS Studio or the command line, we call it development mode. The development mode has the following characteristics on start-up:
                                      <ul>
                                        <li id="json-configuration-files">If not yet existing, a <i>conf/</i> directory with the files <a href="./faqs.html#file-io">&lt;modelname&gt;_io.json</i></a> and <a href="./faqs.html#file-config"><i>&lt;modelname&gt;.json</i></a> is created in the model directory.</li>
                                        <li>The GAMS model is parsed and the <i>&lt;modelname&gt;_io.json</i> file is updated. </li>
                                        <li>An <a href="./faqs.html#file-xlsx">Excel spreadsheet</a> containing data extracted from the GAMS model is created.</li>
                                        <li>The <a href="./faqs.html#file-miroconf"></a>configuration files</a> <a href="./faqs.html#file-miroconf"><i>&lt;modelname&gt;.miroconf</i></a> and <a href="./faqs.html#file-miroconf"><i>&lt;modelname&gt;_hcube.miroconf</i></a> of the MIRO app are updated. They contain the configuration and initialization steps of an app and can by used by an <a href="#file-executable" class="scrollto">executable</a> for a fast startup of MIRO.
                                        The following information is included in binary format:
                                        <ol>
                                          <li>The metadata of all input and output symbols defined between the <code class="language-gams">$onExternalInput
</code> / <code class="language-gams">$offExternalInput
</code> and <code class="language-gams">$onExternalOutput
</code> / <code class="language-gams">$offExternalOutput
</code> tags in the corresponding GAMS model</li>
                                          <li>The configuration of graphics, input widgets, language and all other model-specific configurations for a MIRO app</li>
                                          <li>Initialization of MIRO internal data structures</li>
                                        </ol>
                                      </li>
                                      </ul> 
                                      At a start-up in development mode, the two <a href="#json-configuration-files" class="scrollto">JSON files</a> are used to configure an app. In addition, internal initializations of data structures are run. 
                                      If a MIRO app is not started in development mode, e.g. via <a href="./model.html#create-app-executable">executable</a>, then the configuration files</a> <i>&lt;modelname&gt;.miroconf</i> and <i>&lt;modelname&gt;_hcube.miroconf</i> are used, which already contain the information about JSON side configuration and the initialization of data structures in binary format. 
                                      With this, the start of the application is much faster than in development mode. 
                                      The following has to be considered: 
                                      <br>Since the miroconf files are updated every time the app is started in development mode, they are always up to date with the last launch in that mode. 
                                      When changes have been made to MIRO specific configurations, such as setting a new graphic or specifying a new GAMS symbol to be used in MIRO, these changes are not taken into account when starting via executable. 
                                      Only when the app has been started in development mode and the miroconf files have been updated, the changes become effectivee. 
                                      However, if the actual configuration of a model does not change, it is not necessary to create new configuration files every time the app starts.
                                      </p>
                                      <div class="callout-block callout-warning">
                                         <div class="icon-holder">
                                             <i class="fas fa-info-circle"></i>
                                         </div><!--//icon-holder-->
                                         <div class="content">
                                             <h4 class="callout-title">Note:</h4>
                                             <p>There is one binary configuration file each for Base mode and Hypercube mode. Like the former, the latter is only updated when the corresponding mode is started. 
                                             For the Hypercube configuration this can either be done via the "<i>Switch to Hypercube mode</i>" button in base mode or directly from within Studio via <span class="code">miromode=1</span>.</p>
                                         </div><!--//content-->
                                     </div><!--//callout-block-->
                                  </div><!--//section-block-->
                              </section>
                              <section id="language-files" class="doc-section">
                                  <h2 class="section-title">Language Files</h2>
                                  <div class="section-block">
                                      <p>GAMS MIRO comes with the ability to change the preferred language from within the <a href="./configgen.html">configuration file</a>. Setting your preferred language in the configuration results in MIRO embedding the corresponding language file where all the language specific components are specified via JSON syntax. MIRO currently ships with two of those language files: English and German. If you would like to add another language to this list, you are more than welcome to translate one of the existing language files. The language files are located at: <span class="code">&lt;GAMSRoot&gt;/MIRO/conf/en.json</span> and are validated against the <a href="https://json-schema.org/" target="_blank">JSON Schema</a> file: <span class="code">&lt;GAMSRoot&gt;/MIRO/conf/language_schema.json</span>. Note that there are sometimes placeholders in the language files. Let's take the error message: <kbd>"The value '%s' for the slider: '%s' is not of numeric type."</kbd> for example. <kbd>%s</kbd> will then be replaced with the value and name of the slider by MIRO. Thus, if you create a new language file, be sure to include these placeholders there!</p>
                                      <p>If you would like to contribute your language file, so that other people can profit from your work as well, send us an email: <a href="mailto:miro@gams.com" target="_blank">miro@gams.com</a>.</p>
                                      </div><!--//section-block-->
                              </section>
                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
                                <a class="nav-link scrollto" href="#intro">Introduction</a>
                                <a class="nav-link scrollto" href="#input-widgets">Input widgets</a>
                                <nav class="doc-sub-menu nav flex-column">
                                    <a class="nav-link scrollto" href="#widgets-tables">Tables</a>
                                    <a class="nav-link scrollto" href="#widgets-scalars">Scalars</a>
                                    <a class="nav-link scrollto" href="#widgets-commandLine">Command line parameters</a>
                                    <a class="nav-link scrollto" href="#widgets-dependencies">Dependencies between Widgets</a>
                                    <a class="nav-link scrollto" href="#widgets-advanced">Advanced topics</a>
                                </nav>
                                <a class="nav-link scrollto" href="#custom-graph">Graphics Configuration</a>
                                <nav class="doc-sub-menu nav flex-column">
                                    <a class="nav-link scrollto" href="#graphics-charts">Charts</a>
                                    <a class="nav-link scrollto" href="#graphics-pivot">Pivot tables</a>
                                </nav>
                                <a class="nav-link scrollto" href="#custom-renderers">Custom graphics</a>
                                <a class="nav-link scrollto" href="#development-mode">Advanced: Development mode and compilation phase</a>
                                <a class="nav-link scrollto" href="#language-files">Language Files</a>
                            </nav><!--//doc-menu-->
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->
            </div><!--//container-->
        </div><!--//doc-wrapper-->

    <!--TYPO3SEARCH_end-->
    </div><!--//page-wrapper--><!--#include virtual="/footer_miro.html" -->

    <!-- Main Javascript -->
    <script type="text/javascript" src="assets/plugins/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/prism/min/prism-min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
    <!-- Spectrum ColorPicker plugin -->
    <script type="text/javascript" src="assets/plugins/spectrum/spectrum.js"></script>
    <!-- Moment plugin -->
    <script type="text/javascript" src="assets/plugins/moment/moment.min.js"></script>
    <!-- Bootstrap datetimepicker plugin -->
    <script type="text/javascript" src="assets/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js"></script>

    <script type="text/javascript" src="assets/js/main.js"></script>
    <!-- dependencies (jquery, handlebars and bootstrap) -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>

    <!-- alpaca -->
    <script type="text/javascript" src="assets/js/alpaca.min.js"></script>
    <!-- AJV -->
    <script type="text/javascript" src="assets/js/ajv.min.js"></script>
    <!-- config generator -->
    <script type="text/javascript" src="assets/js/config-gen.js"></script>
    <!-- gifplayer plugin -->
    <script type="text/javascript" src="assets/js/gifplayer.js"></script>
    <script>
    	$('.gifplayer').gifplayer();
    </script>

</body>
</html>
