<!DOCTYPE html>
<html lang="en">
<head>
    <title>GAMS WebUI Documentation</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/lightbox/dist/ekko-lightbox.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">
    <!-- Spectrum ColorPicker plugin -->
    <link rel="stylesheet" href="assets/plugins/spectrum/spectrum.css">
    <!-- bootstrap datetimepicker plugin -->
    <link rel="stylesheet" href="assets/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css">
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
    <!-- alpaca -->
    <link type="text/css" href="assets/css/alpaca.min.css" rel="stylesheet"/>

</head>

<body class="body-blue">
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                          <img class="img-fluid" style="height:50px;" src="assets/images/logo.svg" onerror="this.onerror=null; this.src='assets/images/logo.png'" alt="logo"/>
                            <span class="text-highlight">GAMS</span><span class="text-bold">WebUI</span>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Customize</li>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><span aria-hidden="true" class="icon icon_tools"></span> Customize</h1>
                    <div class="meta"><i class="far fa-clock"></i> Last updated: December 6th, 2018</div>
                </div><!--//doc-header-->
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="intro" class="doc-section">
                                  <h2 class="section-title">Introduction</h2>
                                  <div class="section-block">
                                      <p>This section deals with the configuration of the GAMS WebUI. With the help of a suitable, customized configuration the WebUI can be adjusted to the individual needs of the user. </br>
                                      The GAMS Web Interface is configured using JSON files. For a GAMS model used in the WebUI, these files are located in <span class="code">&lt;modeldirectory&gt;/conf</span>. Two JSON files are used: </p>
                                      <ol class="list">
                                        <li><h6>GMSIO_config.json</h6>
                                      This file is generated automatically each time a GAMS model is run with the command line parameter <span class="code">--webui=compile</span> or <span class="code"><nobr>--webui=launch</nobr></span>. It lists those GAMS symbols which were previously marked in the GAMS code with the <img class="img-fluid" style="height:14px;" src="assets/images/onexternal.png" alt="$onExternalInput" /> / <img class="img-fluid" style="height:14px;" src="assets/images/offexternal.png" alt="$offExternalInput" /> and <img class="img-fluid" style="height:14px;" src="assets/images/onexternalout.png" alt="$onExternalOutput" /> / <img class="img-fluid" style="height:14px;" src="assets/images/offexternalout.png" alt="$offExternalOutput" /> tags. This file should not be modified manually.
                                    </li>
                                    <li>
                                      <h6>config.json</h6>
                                      All the customization of your WebUI happens via the JSON file: <span class="code">config.json</span>. Here you can configure the language of your WebUI, the general appearance, the functionality and much more. Furthermore, all the graphics and widgets are defined here.
                                    </li>
                                  </ol>
                                      <div class="section-block">
                                          <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto;" src="assets/images/custom_options.png" alt="Custom visualization options"/>
                                      </div>
                                    <p>The WebUI offers comprehensive visualization possibilities. Some basic visualization forms are already pre-implemented and only need to be configured by the user, i.e. adapted to her model-specific data. The selection of these pre-implemented graphics currently includes charts (line charts, histograms, pie charts, pivot tables) and is constantly being expanded.</p>
                                      <p>In case the user would like to use his own, non pre-implemented and more sophisticated graphics, a corresponding API is available. More information can be found <a href="#custom-renderers" class="scrollto">here</a>.
                                      </p>
                                      <p>Before the Web interface is started, both JSON files are validated in the background against a stored schema. If a schema is violated by one of these files, an error message is displayed in the default browser.</p>
                                      </div><!--//section-block-->
                            </section>
                            <section id="input-widgets" class="doc-section">
                                  <h2 class="section-title">Input widgets</h2>
                                  <div class="section-block" id="widgets-general">
                                    <h3 class="block-title">General</h3>
                                      <p>The GAMS WebUI comes with several options on how users can enter input data for their <a href="faqs.html#def-model" target="_blank">model</a> runs. The default option is an editable table: </p>
                                      <div class="section-block">
                                          <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto;" src="assets/images/editable-table.png" alt="editable table"/>
                                      </div>
                                      <p>The corresponding GAMS parameter looks like this: <img class="img-fluid" style="height:14px;" src="assets/images/input-widgets-parameter.png" alt="Parameter price(date,symbol) 'Price';" />. By default, every cell in the table is editable and rows can be inserted and removed. If you only want to allow your users to edit certain tables or even only certain columns within a table, you will need to customize your GAMS parameter. You do so by adding this kind of information to the <span class="code">config.json</span> file. For example, if we decide that the table for our parameter <span class="code">price</span> should not be editable, this information needs to be added to your JSON file as follows:
                                        <div class="code-block">
                                            <pre><code class="language-json">{
  &#x22;inputWidgets&#x22;: {
    &#x22;price&#x22;: {
      &#x22;widgetType&#x22;: &#x22;table&#x22;,
      &#x22;readonly&#x22;: true
    }
  }
}</code></pre>
                                        </div><!--//code-block-->
                                         Users will now be able to see the stock prices your model is fed with, but can not edit them.</p>
                                      <div class="callout-block callout-success">
                                          <div class="icon-holder">
                                              <i class="fas fa-thumbs-up"></i>
                                          </div><!--//icon-holder-->
                                          <div class="content">
                                              <h4 class="callout-title">Tip:</h4>
                                              <p>You can use our <a href="#config-gen" class="scrollto">Configuration Generator</a> to customize your input widgets.</p>
                                          </div><!--//content-->
                                      </div><!--//callout-block-->
                                      <p><a href="https://www.gams.com/latest/docs/UG_DataEntry.html#UG_DataEntry_Scalars" target="_blank">Scalars</a> and <a href="https://www.gams.com/latest/docs/UG_SetDefinition.html#UG_SetDefinition_SingletonSets" target="_blank">singleton sets</a> (in the following both referred to as "scalar values" or simply "scalars") are special in the sense that they will not be displayed in one separate table for each scalar value. Instead, they are combined into a single table called "Scalars". This saves space and also makes adding new scalars easy as all you have to do is add a new row to the "Scalars" table. Thus, it improves compactness and flexibility - especially when the GAMS WebUI is connected to a database.</p>
                                      <p>Instead of displaying scalars in tabular form, you can use sliders, dropdown menus, checkboxes and more to populate your models.
                                        <div class="section-block">
                                            <img class="img-fluid" style= "display: block; margin-left: auto; margin-right: auto;" src="assets/images/input_widgets.png" alt="Input widgets for scalar values"/>
                                        </div>
                                        To generate input widgets for one or more scalar values, simply add this information to the configuration file. The scalar is then automatically removed from the "Scalars" table and instead rendered as a separate widget.</p>
                                      <div class="callout-block callout-success">
                                          <div class="icon-holder">
                                              <i class="fas fa-thumbs-up"></i>
                                          </div><!--//icon-holder-->
                                          <div class="content">
                                              <h4 class="callout-title">Tip:</h4>
                                              <p>In case you don't want each widget to be displayed on a separate sheet, we added an option to collect all scalar widgets on one sheet. This option can be found in the <span class="code">config.json</span> file and is therefore available in our <a href="#config-gen" class="scrollto">Configuration Generator</a>.</p>
                                          </div><!--//content-->
                                      </div><!--//callout-block-->
                                      <div class="section-block" id="widgets-dependencies">
                                        <h3 class="block-title">Dependencies between widgets</h3>
                                      <p>One special feature of the GAMS WebUI is that you can define interdependencies between different parameters. Scalars can take two forms of dependencies to other parameters: They can feed their attributes from them and they can manipulate the content of those parameters. An example for this is the <span class="code">kport</span> model that comes with your GAMS WebUI installation (in case you selected to install the example models). Here, we have a set of scenarios that can be selected as well as a singleton set with the currently selected/active scenario. A singleton set is suited to be represented as a dropdown menu, hence we choose that type of widget here. We would like to filter our parameters based on the currently selected scenario so that we only see data that is relevant for this scenario (this type of dependency is also referred to as a <span class="code">backward dependency</span>). This means that in case scenario 1 is selected via our dropdown menu, we only want to display data relevant to scenario 1 to the user. Additionally, we want the choices of our dropdown menu to be the elements of all available scenarios (also referred to as a <span class="code">forward dependency</span>).</p>
                                      <div class="section-block">
                                          <img class="img-fluid gifplayer" style= "display: block; margin-left: auto; margin-right: auto;" src="assets/images/dd-filter.png" alt="Dropdown menu filters table"/>
                                      </div>
                                      <p>Similar dependencies can also be considered for sliders. An example is the <span class="code">pickstock</span> model. Here, the number of stocks you can select for your portfolio can not be larger than the number of stocks in your dataset. Similarly, the number of days you can use to train your model must not be larger than the number of days you have in the stock price dataset. The slider attributes - namely the maximum value that can be selected - should change according to the price data the user uploads. Thus, we also have forward dependencies here.</p>
                                      <p>Of course you can configure those dependencies just like you configure everything else via our <a href="#config-gen" class="scrollto">Configuration Generator</a>. A table that shows the currently supported forms of dependencies for the different input widgets is shown below.</p>
                                      <div class="table-responsive">
                                          <table class="table table-striped">
                                              <thead>
                                                  <tr>
                                                    <th>Input widget type</th>
                                                    <th>Forward dependency</th>
                                                    <th>Backward dependency</th>
                                                    <th>Example model</th>
                                                  </tr>
                                              </thead>
                                              <tbody>
                                                  <tr>
                                                    <td>Dropdown menu</td>
                                                    <td><i class="fas fa-check"></i></td>
                                                    <td><i class="fas fa-check"></i></td>
                                                    <td><span class="code">kport</span></td>
                                                  </tr>
                                                  <tr>
                                                    <td>Slider</td>
                                                    <td><i class="fas fa-check"></i></td>
                                                    <td><i class="fas fa-times"></i></td>
                                                    <td><span class="code">pickstock</span></td>
                                                  </tr>
                                                  <tr>
                                                    <td>Checkbox</td>
                                                    <td><i class="fas fa-times"></i></td>
                                                    <td><i class="fas fa-times"></i></td>
                                                    <td>-</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Date selector</td>
                                                    <td><i class="fas fa-times"></i></td>
                                                    <td><i class="fas fa-times"></i></td>
                                                    <td>-</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Daterange selector</td>
                                                    <td><i class="fas fa-times"></i></td>
                                                    <td>(<i class="fas fa-check"></i>)</td>
                                                    <td><span class="code">pickstock_live</span></td>
                                                  </tr>
                                              </tbody>
                                          </table>
                                        </div><!--//table-responsive-->
                                        <div class="callout-block callout-warning">
                                            <div class="icon-holder">
                                                <i class="fas fa-info-circle"></i>
                                            </div><!--//icon-holder-->
                                            <div class="content">
                                                <h4 class="callout-title">Note:</h4>
                                                <p>You need dependency support for a type of widget which is currently not available? Please feel free to contact us at: <a href="mailto:support@gams.com" target="_blank">support@gams.com</a>. You added dependency support for another type of widget yourself? Send us a pull request on <a href="TODO:ADD GITHUB LINK" target="_blank">GitHub</a>!</p>
                                            </div><!--//content-->
                                        </div><!--//callout-block-->
                                      </div><!--//section-block-->
                                      <div class="section-block" id="widgets-commandLine">
                                        <h3 class="block-title">Command line parameters</h3>
                                           <p>Aside from creating widgets for your GAMS Symbols, you can also generate widgets for GAMS command line parameters (<a href="https://www.gams.com/latest/docs/UG_GamsCall.html#UG_GamsCall_DoubleDashParametersEtc_DoubleDashParam" target="_blank">double dash parameters</a> as well as <a href="https://www.gams.com/latest/docs/UG_GamsCall.html#UG_GamsCall_ListOfCommandLineParameters" target="_blank">GAMS options</a>). Again: All you have to do is add information on how these command line parameters should be displayed inside the WebUI to your <span class="code">config.json</span> file. In order for the GAMS WebUI to recognize whether your symbol is a double dash parameter or a GAMS option, you must prefix the symbol name with either <kbd>GMSPAR_</kbd> for double dash parameters or <kbd>GMSOPT_</kbd> for GAMS options.</p>
                                           <p>Let's assume you want the WebUI to call your GAMS model with the double dash parameter <kbd>--numberPeriods</kbd> set to a value between 1 and 14 (since your model allows up to 14 time periods and the minimum number of periods allowed should be 1). You also want the user to be able to select the MIP solver to use. As you have licenses for CPLEX, Gurobi and XPRESS, you can only use either of these three solvers. Thus, your <span class="code">config.json</span> file should look as follows:</p>
                                             <div class="code-block">
                                                 <pre><code class="language-json">{
  &#x22;inputWidgets&#x22;: {
    &#x22;GMSPAR_numberPeriods&#x22;: {
      &#x22;widgetType&#x22;: &#x22;slider&#x22;,
      &#x22;alias&#x22;: &#x22;Number of time periods&#x22;,
      &#x22;label&#x22;: &#x22;Select the number of time periods to solve&#x22;,
      &#x22;min&#x22;: 1,
      &#x22;max&#x22;: 14,
      &#x22;default&#x22;: 1,
      &#x22;step&#x22;: 1
    },
    &#x22;GMSOPT_mip&#x22;: {
      &#x22;widgetType&#x22;: &#x22;dropdown&#x22;,
      &#x22;alias&#x22;: &#x22;MIP Solver&#x22;,
      &#x22;label&#x22;: &#x22;Solver to use for MIP models&#x22;,
      &#x22;choices&#x22;: [
        &#x22;CPLEX&#x22;,
        &#x22;GUROBI&#x22;,
        &#x22;XPRESS&#x22;
      ],
      &#x22;multiple&#x22;: false,
      &#x22;selected&#x22;: &#x22;CPLEX&#x22;
    }
  }
}</code></pre>
                                             </div><!--//code-block-->
                                             <p>You can generate the configuration for GAMS command line parameters the same way as the scalar widgets via our <a href="#config-gen" class="scrollto">Configuration Generator</a>.</p>
                                             <div class="callout-block callout-warning">
                                                 <div class="icon-holder">
                                                     <i class="fas fa-info-circle"></i>
                                                 </div><!--//icon-holder-->
                                                 <div class="content">
                                                     <h4 class="callout-title">Warning:</h4>
                                                     <p>The following GAMS options are reserved by the GAMS WebUI and can not be used: <span class="code">idir1,idir2,curdir,trace,traceopt,--WEBUI</span></p>
                                                 </div><!--//content-->
                                             </div><!--//callout-block-->
                                      </div><!--//section-block-->
                                      <div class="section-block" id="widgets-advanced">
                                        <h3 class="block-title">Advanced topics</h3>
                                         <p>We covered the basics of how to use widgets for your scalar inputs as well as command line parameters. Now, we will go into the technical details of how the communication between the GAMS WebUI and the GAMS compiler works:</p>
                                         <p>Whenever a scalar value is set in the GAMS WebUI and GAMS is called, the scalar is read and an environment variable is set. The name of this environment variable is simply the name of the variable prefixed with the filename of your model followed by an underscore. So if your modelfile is called <span class="code">hello.gms</span> and you defined a scalar input called <kbd>myScalar</kbd> that is read from the GAMS WebUI, the environment variable that is created when executing your model from the WebUI is called <kbd>HELLO_MYSCALAR</kbd>. Inside your GAMS model, this environment variable can be be accessed at compile time via: <kbd>%sysenv.HELLO_MYSCALAR%</kbd>. Note that we follow the convention that environment variables are capitalized.</p>
                                         <p>Knowing that, internally, scalars are imported from the WebUI by setting environment variables comes in handy in certain situations e.g. if you want to access them inside an <a href="https://www.gams.com/latest/docs/UG_EmbeddedCode.html" target="_blank">embedded code</a> section. Thus, you might want to keep this detail in the back of your mind.</p>
                                         <p>One more important aspect you should be aware of is how widgets that return two scalars instead of one are treated. Those widgets are currently a slider with two handles (also referred to as a slider range) and a date range selector. The lower value (or starting date of the date range) is postfixed with <kbd>_lo</kbd> and the upper value (or end date of the date range) is postfixed with <kbd>_up</kbd>. This means that if you specified a slider range for your double dash parameter <kbd>--RANGE</kbd>, you can access the lower value of the range with <kbd>%RANGE_LO%</kbd> and the upper value with <kbd>%RANGE_UP%</kbd> while <kbd>%RANGE%</kbd> will not be set.</p>
                                      </div><!--//section-block-->
                            </section>
                            <section id="config-gen" class="doc-section">
                                  <h2 class="section-title">Configuration Generator</h2>
                                  <div class="section-block">
                                    <p>In order for you to be able to customize your WebUI to its full potential, we have developed this Configuration Generator. Here you can customize your WebUI and graphics. At the end you can download the JSON-file that needs to be placed in the folder <span class="code">&lt;modeldirecory&gt;/conf</span>.</p>
                                    <div class="upload-btn-wrapper" id="gmsioUpload">
                                      <span id = "errMsg" style="color:red;font-weight:bold;"></span>
                                      <button class="upload-btn">Upload your GMSIO_config.json file</button>
                                      <input id="selectFile" type="file" name="myfile" value="Import" accept=".json,application/json" oninput="parseGMSIO()"/><br />
                                    </div>
                                    <div id="confGenContent" style="display:none;">
                                      <div id="selectConfigType" style="display:none;">
                                        <button type="button" id="launchConfigGenBt" class="upload-btn">Generate new config.json file</button>
                                        <div class="upload-btn-wrapper" id="configJSONupload" style="overflow:visible;">
                                          <span id = "errMsg" style="color:red;font-weight:bold;"></span>
                                          <button class="upload-btn">Merge with existing config.json file</button>
                                          <input id="configJSONfile" type="file" name="myfile" value="Import" accept=".json,application/json" oninput="mergeExisting()"/><br />
                                        </div>
                                      </div>
                                      <div id="form1"></div>
                                      <button id="reset-config-gen" type="button" class="configgen-reset-btn" onclick="if(window.confirm('Are you sure you want to reset the configuration generator?')){
                                        $('#form1').alpaca('destroy');
                                        $('#launchConfigGenBt').unbind();
                                        $('#gmsioUpload').show();
                                        $('#confGenContent').hide();
                                        $(window).scrollTo($('#config-gen'));
                                        $('#errMsg').hide();
                                      }">Reset</button>
                                    </div>
                                  </div><!--//section-block-->
                            </section><!--//doc-section-->

                            <section id="custom-renderers" class="doc-section">
                                <h2 class="section-title">Custom Renderers</h2>
                                <div class="section-block">
                                    <p>The GAMS WebUI allows you to use your own custom renderers for your datasets. Currently we only support the visualization of data, not the generation. We may add this feature at a later stage depending on the demand.</p>
                                    <p>In order to visualize a dataset, you will need to write two functions: a placeholder where your graphs etc. will later be rendered as well as the rendering function itself. To learn more about the concepts of this dual component approach, visit the website for the R Shiny framework that the GAMS WebUI is based upon: <a href="https://shiny.rstudio.com/">https://shiny.rstudio.com/</a>. In particular, we are using <a href="https://shiny.rstudio.com/articles/modules.html" target="_blank">Shiny Modules</a> to realize the interface between the GAMS WebUI and your custom renderer functions. The template for the two components of every custom renderer is as follows:</p>
                                    <div class="code-block">
                                        <pre><code class="language-r">
&#x3C;rendererName&#x3E;Output &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
}

render&#x3C;rendererName&#x3E; &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
}
                                        </code></pre>
                                    </div><!--//code-block-->
                                    <p>Note that you need to replace <span class="code">&lt;rendererName&gt;</span> with your preferred name. Let's go through this code step by step. As mentioned, for each custom renderer we need to specify two functions: one that generates the the placeholder and one that fills this placeholder with data. The name of the placeholder function must be postfixed with "<span class="code">Output</span>" and the name of the function that specifies the actual rendering must be prefixed with the keyword "<span class="code">render</span>". Let's take the famous <a href="https://www.gams.com/latest/gamslib_ml/libhtml/gamslib_trnsport.html" target="_blank">transport</a> example from George Dantzig: We own a bunch of factories and wish to find a least cost shipping schedule that meets the demand at markets we are shipping to. Furthermore, the capacity constraints of our factories must not be violated. We decide to visualize the optimal shipping schedule on a map. As there is currently no out-of-the-box rendering function for visualizing data on a map for the GAMS WebUI, we need to write our own custom renderer which we name: <span class="code">transportMap</span>. Thus, our initial template looks like this:
                                    <div class="code-block">
                                        <pre><code class="language-r">transportMapOutput &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
}
renderTransportMap &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
}</code></pre>
                                    </div><!--//code-block-->
                                    <div class="callout-block callout-warning">
                                        <div class="icon-holder">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <h4 class="callout-title">Note:</h4>
                                            <p>R is case sensitive and the first letter after the <span class="code">render</span> keyword needs to be uppercase! Thus, if the name of your renderer starts with a lowercase letter, you need to convert it to uppercase in the <kbd>render*</kbd> function.</p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                    Both functions take a number of parameters. Let's start with the placeholder function: Each custom renderer has its own ID. In order to avoid <a href="https://en.wikipedia.org/wiki/Name_collision" target="_blank">name collisions</a> with other custom renderers or functions of the GAMS WebUI, we need to prefix our input and output elements with this ID. How should we prefix our custom input and output functions, though? Fortunately, Shiny provides us with the function: <kbd><a href="https://shiny.rstudio.com/reference/shiny/0.13.1/NS.html" target="_blank">NS()</a></kbd>. This function takes the ID of our custom renderer as its input and returns a function (functions that return functions are often called <i>closures</i> in R) that does the prefixing for us. Thus, whenever we want to specify a new input or output element, we simply hand the ID we would like to use for this element over to this prefixing function (which in our case is bound to the <kbd>ns</kbd> variable). We can also specify a height for our renderer as well as the path where the renderer files are located and additional options we can pass to our renderer functions.</p>
                                    <p>Let's get back to our example. As we would like to visualize our optimized schedule on an interactive map, we choose the popular <a href="https://leafletjs.com" target="_blank">Leaflet</a> library. Fortunately, there is already an R/Shiny interface for this library: <a href="https://rstudio.github.io/leaflet/" target="_blank">Leaflet for R</a>. This R package comes with the two functions: <kbd>leafletOutput()</kbd> that generates the placeholder and <kbd>renderLeaflet()</kbd> that renders a Leaflet map object created by the <kbd>leaflet()</kbd> function which takes our dataframe as its first argument. So let's put the pieces together and extend our code:
                                      <div class="code-block">
                                          <pre><code class="language-r">transportMapOutput &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
  leafletOutput(ns(&#x22;map&#x22;), height = height)
}
renderTransportMap &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
  output$map &#x3C;- renderLeaflet(leaflet(data))
}</code></pre>
                                      </div><!--//code-block-->
                                      Note that we used the aforementioned <kbd>ns()</kbd> function to prefix the ID (<span class="code">"map"</span>) that we chose for our Leaflet element. Just like any other placeholder element, the function <kbd>leafletOutput()</kbd> generates an element that can be accessed via the list-like <kbd>output</kbd> object.
                                      Inside our rendering function we assign this object the Leaflet map that is created by the <kbd>renderLeaflet()</kbd> function. In case you find the whole concept of having an output function, a rendering function, an output object etc. is still very confusing, you should take a look at the <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/" target="_blank">offical tutorial series</a> for the Shiny framework. To summarize: elements that generate data can be accessed by the <kbd>input</kbd> object; elements that transform data to some form of visualization via the <kbd>output</kbd> object and any user-specific information via the <kbd>session</kbd> object.
                                    </p><p>
                                      The data that you want to visualize is supplied via the <kbd>data</kbd> argument - an R dataframe. The function argument <kbd>path</kbd> is a string (a one-dimensional character vector) that specifies the absolute path to your <span class="code">customRenderer</span> directory. This is useful if you want to include external files in your custom renderer functions. Optional parameters that you want to pass to the renderer can be accessed via the argument <kbd>options</kbd> - a (nested) list. </p>
                                      <p>Now that we are familiar with the template that every custom renderer builds upon, we are still missing one fundamental concept so that we can use our custom renderer: binding the renderer to dataset(s) we wish to visualize.</p>
                                      <p>This binding of GAMS parameter to renderer function is specified - just like any other renderer binding - in the <span class="code">config.json</span> file; more precisely the <span class="code">dataRendering</span> section. Let's assume that in our transportation example the GAMS parameter that specifies the optimal schedule is defined as <span class="code">optSched(lngP, latP, lngM, latM, plant, market)</span> where <span class="code">(lngP,latP)</span> and <span class="code">(lngM, latM)</span> are the coordinates of the plants and markets respectively. Our <span class="code">config.json</span> file should then look like this:
                                        <div class="code-block">
                                            <pre><code class="language-json">{
   &#x22;dataRendering&#x22;:{
      &#x22;optSched&#x22;:{
         &#x22;outType&#x22;:&#x22;transportMap&#x22;,
         &#x22;height&#x22;:&#x22;700&#x22;,
         &#x22;options&#x22;:{
            &#x22;title&#x22;:&#x22;Optimal transportation schedule&#x22;
         }
      }
   }
}</code></pre>
                                        </div><!--//code-block-->
                                        You can also use our <a href="#config-gen" class="scrollto">Configuration Generator</a> to generate the configuration file.
                                      </p><p>As you can see we bound the GAMS parameter <span class="code">optSched</span> to our new custom renderer <span class="code">transportMap</span>. Furthermore, we specified a parameter: <span class="code">title</span> that can be accessed by our custom renderer via the <span class="code">options</span> list. </p>
                                      <p>If we decided to run our WebUI now, we still would not be able to see anything other than a blank area. Thus, we will need to fill our renderer with some life:
                                        <div class="code-block">
                                            <pre><code class="language-r">transportMapOutput &#x3C;- function(id, height = NULL, options = NULL, path = NULL){
  ns &#x3C;- NS(id)
  tagList(
    textOutput(ns(&#x22;title&#x22;)),
    leafletOutput(ns(&#x22;map&#x22;))
  )
}
renderTransportMap &#x3C;- function(input, output, session, data, options = NULL, path = NULL){
  output$title &#x3C;- renderText(options$title)
  output$map   &#x3C;- renderLeaflet(leaflet(data) %&#x3E;%
                                  addTiles() %&#x3E;%
                                  addMarkers(~lngP, ~latP, label = ~plant)
  )
}</code></pre>
                                        </div><!--//code-block-->
                                       We have added a new placeholder for the title. Note the use of the <kbd>tagList()</kbd> function. Since every R function has a single return value which is either the last evaluated expression of the function or the argument to the first <kbd>return()</kbd> function that is encountered in the function body, we need to return a list object. A <kbd>tagList()</kbd> is simply a list with an additional attribute to identify that the elements are html tags.</p><p>Within our rendering function, we set the title, add the default <a href="https://www.openstreetmap.org" target="_blank">OpenStreetMap</a> tiles as well as some markers for our plants.
                                      <div class="callout-block callout-success">
                                          <div class="icon-holder">
                                              <i class="fas fa-thumbs-up"></i>
                                          </div><!--//icon-holder-->
                                          <div class="content">
                                              <h4 class="callout-title">Note:</h4>
                                              <p>The syntax <kbd>~lngP</kbd> that you see here is simply a shorthand for <kbd>data$lngP</kbd> - the pipe operator <kbd>a(x) %&#x3E;% b(y)</kbd> a shorthand for <kbd>tmp &#x3C;- a(x); b(tmp, y)</kbd></p>
                                          </div><!--//content-->
                                      </div>
                                      If you run your WebUI now, you will be able to see a map with markers at the coordinates of the plants as you specified them in your GAMS sets: <kbd>lngP</kbd> and <kbd>latP</kbd>. When you hover over the markers, you will be able to see the names of the plants as defined by the set: <kbd>plants</kbd>. You can see a screenshot of the result below:
                                      <div class="section-block">
                                          <img class="img-fluid" src="assets/images/custom-renderer-map.png" alt="Result of custom renderer - Map with markers" />
                                      </div>
                                      You now know everything you need in order to get started writing your own custom renderers! Congratulations! In case you want to learn more, you can find a complete example of a custom renderer function in the <span class="code">trnsport</span> model that comes with your GAMS WebUI installation. In case you create a new renderer that you would like to share so that others can benefit from your work as well, please <a href="mailto:support@gams.com" target="_blank">contact us</a>!
                                      </p>
                                </div><!--//section-block-->
                              </section>
                              <section id="language-files" class="doc-section">
                                  <h2 class="section-title">Language Files</h2>
                                  <div class="section-block">
                                      <p>The GAMS WebUI comes with the ability to change the preferred language from within the <a href="#config-gen" class="scrollto">configuration file</a>. Setting your preferred language in the configuration results in the WebUI embedding the corresponding language file where all the language specific components are specified via JSON syntax. The WebUI currently ships with two of those language files: English and German. If you would like to add another language to this list, you are more than welcome to translate one of the existing language files. The language files are located at: <span class="code">&lt;GAMSRoot&gt;/GMSWebUI/conf/en.json</span> and are validated against the <a href="https://json-schema.org/" target="_blank">JSON Schema</a> file: <span class="code">&lt;GAMSRoot&gt;/GMSWebUI/conf/language_schema.json</span>. Note that there are sometimes placeholders in the language files. Let's take the error message: <kbd>"The value '%s' for the slider: '%s' is not of numeric type."</kbd> for example. <kbd>%s</kbd> will then be replaced with the value and name of the slider by the WebUI.</p>
                                      <p>If you would like to contribute your language file, so that other people can profit from your work as well, send us an email: <a href="mailto:support@gams.com" target="_blank">support@gams.com</a>.</p>
                                      </div><!--//section-block-->
                                </section>

                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
                                <a class="nav-link scrollto" href="#intro">Introduction</a>
                                <a class="nav-link scrollto" href="#input-widgets">Input widgets</a>
                                <nav class="doc-sub-menu nav flex-column">
                                    <a class="nav-link scrollto" href="#widgets-general">General</a>
                                    <a class="nav-link scrollto" href="#widgets-commandLine">Command line parameters</a>
                                    <a class="nav-link scrollto" href="#widgets-advanced">Advanced topics</a>
                                </nav>
                                <a class="nav-link scrollto" href="#config-gen">Configuration Generator</a>
                                <a class="nav-link scrollto" href="#custom-renderers">Custom Renderers</a>
                                <a class="nav-link scrollto" href="#language-files">Language Files</a>
                            </nav><!--//doc-menu-->
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->
            </div><!--//container-->
        </div><!--//doc-wrapper-->

    </div><!--//page-wrapper-->

    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Designed with <i class="fas fa-heart"></i> by <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers</small>

        </div><!--//container-->
    </footer><!--//footer-->


    <!-- Main Javascript -->
    <script type="text/javascript" src="assets/plugins/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/prism/min/prism-min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
    <!-- Spectrum ColorPicker plugin -->
    <script type="text/javascript" src="assets/plugins/spectrum/spectrum.js"></script>
    <!-- Moment plugin -->
    <script type="text/javascript" src="assets/plugins/moment/moment.min.js"></script>
    <!-- Bootstrap datetimepicker plugin -->
    <script type="text/javascript" src="assets/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js"></script>

    <script type="text/javascript" src="assets/js/main.js"></script>
    <!-- dependencies (jquery, handlebars and bootstrap) -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>

    <!-- alpaca -->
    <script type="text/javascript" src="assets/js/alpaca.min.js"></script>
    <!-- AJV -->
    <script type="text/javascript" src="assets/js/ajv.min.js"></script>
    <!-- config generator -->
    <script type="text/javascript" src="assets/js/config-gen.js"></script>
    <!-- gifplayer plugin -->
    <script type="text/javascript" src="assets/js/gifplayer.js"></script>
    <script>
    	$('.gifplayer').gifplayer();
    </script>

</body>
</html>
