<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<head>
    <title>GAMS MIRO Server</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GAMS MIRO documentation">
    <meta name="author" content="GAMS Development Corp.">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/lightbox/dist/ekko-lightbox.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
    <!--#include virtual="/wheader.html" -->
</head>

<body class="body-orange">
    <!--#include virtual="/wbody.html" -->
    <div class="page-wrapper">
    <!--#include virtual="/mirover.html" -->

        <!-- ******Header****** -->
        <header id="header" class="sub-header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                          <img class="img-fluid" style="height:75px;" src="assets/images/logo.svg" onerror="this.onerror=null; this.src='assets/images/logo.png'" alt="GAMS MIRO"/>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">GAMS MIRO Server</li>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div class="row justify-content-end search-box-wrapper">
                    <div class="float-right">
                        <input class="form-control search-box" id="miroSearch" type="text" placeholder="Search" aria-label="Search">
                        <ul id="miroSearchResults" class="list-group">
                        </ul>
                    </div>
                </div>
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><span aria-hidden="true" class="icon fas fa-cloud"></span> GAMS MIRO Server</h1>
                </div><!--//doc-header-->
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="server-introduction" class="doc-section">
                                <h2 class="section-title">Introduction</h2>
                                <div class="section-block">
                                    <p>In the most basic setup - GAMS MIRO Desktop - both the MIRO application and GAMS itself are installed on the same computer and run exclusively on this machine. But MIRO is not limited to this setup: You can run your MIRO applications locally, but solve the GAMS jobs in the cloud. For you nothing changes, the MIRO interface remains the same. We call this setup <i>GAMS MIRO Desktop - boosted by GAMS Engine</i>. <i><a href="https://www.gams.com/engine/">GAMS Engine</a></i> is a server software that allows you to run GAMS models on centralised compute resources. It uses state-of-the-art technology to handle the entire job management, scheduling and load balancing of your computationally intensive optimization problems. GAMS Engine is also used for <i>GAMS MIRO Server</i>. This setup allows you to run both the GAMS execution engine as well as the MIRO application itself in the cloud. Your optimization applications can then be accessed from any device with a modern web browser like a PC, smartphone or tablet.</p>
                                    <div class="section-block">
                                        <img class="img-fluid" style= "max-height:400pt; display: block; margin-left: auto; margin-right: auto;" src="assets/images/remote-execution.png" alt="GAMS MIRO Server" />
                                    </div>
                                    <div class="callout-block callout-warning">
                                        <div class="icon-holder">
                                            <i class="fas fa-info-circle"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <b class="callout-title">Note:</b>
                                            <p>Both <i>GAMS MIRO Desktop - boosted by GAMS Engine</i> and <i>GAMS MIRO Server</i> make use of <a href="https://www.gams.com/sales/engine_facts/">GAMS Engine</a>, which must be purchased separately. Please contact <a href="mailto:miro@gams.com">sales@gams.com</a> if you are interested in one of these setups.</p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                </div>
                            </section> 
                            <section id="miro-desktop-remote" class="doc-section">
                                <h2 class="section-title">GAMS MIRO Desktop - Boosted by GAMS Engine</h2>
                                <div class="section-block">
                                    <p>With <i>GAMS MIRO Desktop - Boosted by GAMS Engine</i>, you can solve GAMS jobs in the cloud with your locally running MIRO applications. This requires a running instance of GAMS Engine (read more about the installation of GAMS Engine <a href="https://www.gams.com/engine/installation.html">here</a>). To switch from executing your optimization jobs on your local machine to solving them in the cloud open your MIRO library and go to <i>Preferences</i> &rarr; <i>General</i>. Activate the checkbox "Execution of models on GAMS Engine". This setting affects all deployed MIRO apps (started via the MIRO library) and all MIRO apps under development (started via GAMS Studio or the command line).</p> 
                                    <div class="section-block">
                                        <img class="img-fluid" style= "max-height:400pt; display: block; margin-left: auto; margin-right: auto;" src="assets/images/remote/remote_enable.png" alt="Enable remote execution" />
                                    </div>
                                    <p>The next time you launch a MIRO application, a login dialog appears. To connect to GAMS Engine, the following information is required: 
                                      <ul>
                                        <li><b>Engine URL</b>: URL where GAMS Engine is hosted.</li>
                                        <li><b>Username &amp; password</b>: Your GAMS Engine credentials. More about the user management of GAMS Engine can be found <a href="https://www.gams.com/engine/administration.html#user-management">here</a>.</li>
                                        <li><b>Namespace</b>: The <i>namespace</i> to solve the model in. Engine uses these namespaces to organize GAMS models. For example, each model name can only occur once within a namespace. More about this topic can be found <a href="https://www.gams.com/engine/administration.html#namespaces">here</a>.</li>
                                        <li><b>Is your model registered in the namespace</b>: When a model is registered in an Engine namespace, the model files are stored on the Engine server. This avoids having to send the same model files to Engine  for each job submit. Only the scenario data is communicated in this case. Read more <a href="https://www.gams.com/engine/administration.html#models">here</a>.</li>
                                        <li><b>Remember me</b>: Your credentials will be saved so that you will not have to log in again the next time you start the application.</li>
                                      </ul>
                                    </p>
                                </div>
                            </section>  
                            <section id="miro-server" class="doc-section">
                                <h2 class="section-title">GAMS MIRO Server</h2>
                                <div class="section-block">
                                    <p>Both GAMS MIRO Server and GAMS MIRO Desktop - boosted by GAMS Engine - make use of the GAMS Engine. The following section explains how to set up GAMS MIRO Server.</p>
                                    <div class="callout-block callout-warning">
                                        <div class="icon-holder">
                                            <i class="fas fa-info-circle"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <b class="callout-title">Note:</b>
                                            <p>The following installation instructions refer exclusively to the installation of GAMS MIRO Server. The corresponding installation steps have to be performed on the server used for this purpose. </p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                </div>
                                <div  id="server-prerequisites"  class="section-block">
                                    <h3 class="block-title">Prerequisites</h3>
                                    <p>Since GAMS MIRO Server is based on <a href = "https://www.docker.com/" target = "_blank">Docker technology</a>, both Docker and docker-compose must be installed on the server first.</p>
                                    <ul>
                                      <li><a href = "https://docs.docker.com/install/" target = "_blank">Install Docker</a></li>
                                      <li><a href = "https://docs.docker.com/compose/install/" target = "_blank">Install Docker compose</a></li>
                                    </ul>
                                    <p>To use the Docker CLI without <i>sudo</i>, you must add your user to the docker group.</p>
                                    <ul>
                                      <li><a href = "https://docs.docker.com/install/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target = "_blank">Manage docker as a non root user</a></li>
                                    </ul>
                                </div>
                                <div  id="server-install"  class="section-block">
                                    <h3 class="block-title">Installation</h3>
                                    <p>When you purchase GAMS MIRO Server, you will receive a ZIP file that contains everything you need to get started. The general installation instructions are given below. However, keep in mind that the installation is highly dependent on your setup. Since GAMS MIRO Server is a server application, the concepts of <i>ports</i>, <i>SSL</i>, <i>certificates</i>, etc. are omnipresent. Setting up such a system is a common task for a server administrator. If you have problems with the installation, please do not hesitate to contact us by mail at <a href="mailto:support@gams.com" target="_blank">support@gams.com</a>.</p>
                                    <ol>
                                          <li>Install Docker from <a href="https://docs.docker.com/engine/install/" target="_blank">https://docs.docker.com/engine/install/</a>. Start docker afterwards. We further recommend to configure Docker to <a href="https://docs.docker.com/engine/install/linux-postinstall/#configure-docker-to-start-on-boot">start on boot</a>.</li>
                                          <li>Install Docker Compose from <a href="https://docs.docker.com/compose/install/" target="_blank">https://docs.docker.com/compose/install/</a>.</li>
                                          <li>Extract <kbd>miro_server.zip</kbd>. This will create a subfolder <kbd>miro_server</kbd>.</li>
                                          <li>Open a terminal and <kbd>cd</kbd> into that folder.
										  <div class="callout-block callout-success">
                                              <div class="icon-holder">
                                                  <i class="fas fa-thumbs-up"></i>
                                              </div><!--//icon-holder-->
                                              <div class="content">
                                                  <b class="callout-title">Tip:</b>
                                                  <p>GAMS MIRO applications will later be stored at this location.</p>
                                              </div><!--//content-->
                                          </div><!--//callout-block--></li> 
										  <li>In case MIRO Server and GAMS Engine run on the same machine: Get the IP of the <kbd>docker0</kbd> network interface via: <kbd>sudo ip addr show docker0 |grep -Po 'inet \K[\d.]+'</kbd>. You will need this IP in the next step.</li>
                                          <li id="step6">Install MIRO Sever by running <kbd>./miro-compose install</kbd>. You will be asked to enter the GAMS Engine host and the <a href="https://gams.com/engine/administration.html#namespaces">namespace</a> to be used by MIRO Server. For the host enter: <kbd>http://&lt;IP extracted from previous step&gt;/engine/api</kbd>. If you specified a port when installing GAMS Engine, this port must also be specified here: <kbd>http://&lt;IP extracted from previous step&gt;:&lt;engine port&gt;/engine/api</kbd>. The default namespace is <kbd>global</kbd>. You can also specify any other namespace created in GAMS Engine. You can change the GAMS Engine connection info at any time by modifying the <kbd>.env</kbd> file that is located inside the miro_server directory. The following environment variables have to be set:
										  <div class="table-responsive" style="margin:15px auto;">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                      <th style="width:30%;">Environment Variable Name</th>
                                                      <th>Environment Variable Value</th>
                                                      <th>Example</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                      <td>GMS_MIRO_ENGINE_HOST</td>
                                                      <td>IP adress and port/DNS of Engine</td>
                                                      <td>https://miro.gams.com/engine/api</td>
                                                    </tr>
                                                    <tr>
                                                      <td>GMS_MIRO_ENGINE_NS</td>
                                                      <td>Engine namespace to be used by MIRO Server</td>
                                                      <td>miro_server</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                          </div><!--//table-responsive-->
										  Note that MIRO Server must be restarted if the <kbd>.env</kbd> has been changed. You will also be asked whether you want to use MIRO Server with or without authentication service, i.e. whether users have to log in with an existing GAMS Engine account (default) or whether everyone with a URL should have free access. Read more about the user management in the section <a href="#authentication-user-management">Authentication and User Management</a>.
										  The installation script will inform you whether the installation was successful or not.
										  </li>
                                    </ol>
                                </div>
                                <div  id="server-interaction"  class="section-block">
                                    <h3 class="block-title">Start / Stop / Update / Uninstall</h3> 
									<h5 class="block-title">Start</h5> 
                                    <p>Once you have GAMS MIRO Server installed, you can launch it via <div class = "console-box"><span class="console-content">&gt; ./miro-compose start</span>.</div>GAMS MIRO Server will now listen on port 8080. You can log in with any GAMS Engine user that has at least execute permissions on the namespace provided. A user with full access to that namespace will be considered as administrator by MIRO Server and can add/remove applications. To access the admin panel, go to <kbd>/app/admin</kbd>. Add your MIRO applications here. To access a MIRO application that has been added to MIRO Server, go to <kbd>/app_direct/&lt;appId&gt;</kbd>, where <kbd>appId</kbd> is the lowercase name of your main gms file.</p> 
									<h5 class="block-title">Stop</h5> 
									<p>To stop a running instance of GAMS MIRO Server, run <div class = "console-box"><span class="console-content">&gt; ./miro-compose stop</span></div></p> 
									<h5 class="block-title">Update</h5> 
									<p>To update GAMS MIRO Server to the latest version, run <div class = "console-box"><span class="console-content">&gt; ./miro-compose update</span></div>Note that this will pull new images from the GAMS Docker registry and launch them. If you only want to pull new images, run <div class = "console-box"><span class="console-content">&gt; ./miro-compose pull</span></div></p>
									<h5 class="block-title">Uninstall</h5> 
                                    <p>To remove GAMS MIRO Server including all data associated with it from your server, run <div class = "console-box"><span class="console-content">&gt; ./miro-compose uninstall</span></div> 
                                    Additionally, you can remove the directory where you extracted the configuration files of the GAMS MIRO Server.</p>
                                </div>
                                <div  id="server-nginx"  class="section-block">
                                    <h3 class="block-title">Nginx example configuration</h3> 
                                    <p>We suggest to run GAMS MIRO Server behind a reverse proxy such as <a href = "https://www.nginx.com/" target = "_blank">nginx</a>. You can find an example configuration in the file <kbd>miro.conf</kbd> located inside the <i>miro_server</i> directory mentioned in the installation instructions. To apply this configuration, simply copy it to the configuration location of your nginx (e.g. <kbd>sudo cp miro.conf /etc/nginx/conf.d/</kbd>). Note that you will have to reload nginx afterwards using <kbd>sudo nginx -s reload</kbd>.</p>
								</div>
                                <div  id="server-engine-on-same-host"  class="section-block">
                                    <h3 class="block-title">Hosting GAMS Engine and MIRO Server on the same host</h3> 
									<p>When you are hosting MIRO Engie and MIRO Server on the same host, you have to merge the nginx configurations of both GAMS Engine and MIRO Server. A resulting <kbd>/etc/nginx/conf.d/miro.conf</kbd> could look as follows:</p>
                                     <pre><code class="language-">map $http_upgrade $connection_upgrade {
   default upgrade;
   ''      close;
}
server {
    listen 80;
    location / {
        proxy_pass http://127.0.0.1:8080;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_read_timeout 600s;

        proxy_redirect    off;
        proxy_set_header  Host             $http_host;
        proxy_set_header  X-Real-IP        $remote_addr;
        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;
        proxy_set_header  X-Forwarded-Proto $scheme;
    }
    location /engine {
        proxy_pass http://127.0.0.1:5000;
        
        proxy_redirect    off;
        proxy_set_header  Host             $http_host;
        proxy_set_header  X-Real-IP        $remote_addr;
        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;
        proxy_set_header  X-Forwarded-Proto $scheme;

    }
    client_max_body_size 0;
}</code></pre>
                                    <p>Note that even though both GAMS Engine and MIRO Server run on the same host, the GAMS Engine host is not <kbd>localhost</kbd>. In case TLS, port/certificate info etc. is used, this needs to be added here as well. If you need help with this, contact us. Nginx needs to be reloaded if the configuration has been changed: <kbd>sudo nginx -s reload</kbd>.</p>
									<p>
									You may want to host MIRO Server on a different path than root. To do this, you must adjust the context path in the file <i>application.yml</i> accordingly (entry <i>server.servlet.context-path</i>).</p>
                                </div>
                                <div  id="authentication-user-management"  class="section-block">
                                    <h3 class="block-title">Authentication and User Management</h3> 
                                    <p>By default MIRO Server uses the authentication service of GAMS Engine. Every user who wants to solve GAMS jobs with MIRO Server needs a GAMS Engine user account with at least execute permissions in the <a href="https://gams.com/engine/administration.html#namespaces">namespace</a> to be used. If you are GAMS Engine administrator, you can manage users and namespaces for MIRO Server directly in the <a href="https://www.gams.com/engine/administration.html#user-management">Engine UI</a>.</p>
									<p>If you decide to use MIRO Server without authentication (e.g. to showcase applications as in the case of the <a href="https://miro.gams.com">MIRO Gallery</a>), you need to register one GAMS Engine user with execute permissions in the namespace to be used, e.g. a user <kbd>anonymous</kbd>. You will need the credentials of that user in <a href="#step6" class="scrollto">step 6 of the installation</a>. You can also provide the credentials of this user via the `.env` file:</p>
									<div class="table-responsive" style="margin:15px auto;">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                      <th style="width:30%;">Environment Variable Name</th>
                                                      <th>Environment Variable Value</th>
                                                      <th>Example</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                      <td>GMS_MIRO_ENGINE_ANONYMOUS_USER</td>
                                                      <td>Username of anonymous user</td>
                                                      <td>miro_server_anonymous</td>
                                                    </tr>
                                                    <tr>
                                                      <td>GMS_MIRO_ENGINE_ANONYMOUS_PWD</td>
                                                      <td>Password of anonymous user</td>
                                                      <td>t@qHwt%3Mh</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                          </div><!--//table-responsive-->
                                </div>
                                <div  id="admin-panel"  class="section-block">
                                    <h3 class="block-title">The admin panel</h3> 
                                    <p></p>
                                </div>
                                <div  id="selinux"  class="section-block">
                                    <h3 class="block-title">Running under SELinux</h3> 
                                    <p>Note that with SELinux active (e.g. CentOS/RHEL), you might have to allow your nginx server to proxy to the upstream MIRO Server host. You can do so by running: <kbd>setsebool -P httpd_can_network_connect 1</kbd>.</p>
                                </div>
								
                                <div  id="server-customize"  class="section-block">
                                    <h3 class="block-title">Customize</h3> 
                                    <p>The entire customization in GAMS MIRO Server is done in the file <i>data/application.yml</i>. Here you can add/remove users, change the authentication method or the language of GAMS MIRO.</p>
                                    <div class="callout-block callout-warning">
                                        <div class="icon-holder">
                                            <i class="fas fa-info-circle"></i>
                                        </div><!--//icon-holder-->
                                        <div class="content">
                                            <b class="callout-title">Note:</b>
                                            <p>Please make sure each user is assigned to at least one group. MIRO does not support assigning users to no group at all! </p>
                                        </div><!--//content-->
                                    </div><!--//callout-block-->
                                </div>
                            </section> 
                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
                                <a class="nav-link scrollto" href="#server-introduction">Introduction</a>
                                <a class="nav-link scrollto" href="#miro-desktop-remote">GAMS MIRO Desktop - Boosted by GAMS Engine</a>
                                <a class="nav-link scrollto" href="#miro-server">GAMS MIRO Server</a>
                                <nav class="doc-sub-menu nav flex-column">
                                  <a class="nav-link scrollto" href="#server-prerequisites">Prerequisites</a>
                                  <a class="nav-link scrollto" href="#server-install">Installation</a>
                                  <a class="nav-link scrollto" href="#server-interaction">Start / Update / Stop / Uninstall</a>
                                  <a class="nav-link scrollto" href="#server-nginx">Nginx example configuration</a>
                                  <a class="nav-link scrollto" href="#authentication-user-management">Authentication and user management</a>
                                  <a class="nav-link scrollto" href="#admin-panel">The admin panel</a>
                                  <a class="nav-link scrollto" href="#selinux">Running under SELinux</a>
                                  <a class="nav-link scrollto" href="#server-customize">Customize</a>
                                </nav><!--//nav-->
                            </nav><!--//doc-menu-->
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->
            </div><!--//container-->
        </div><!--//doc-wrapper-->
    </div><!--//page-wrapper-->
    <script type="text/javascript" src="assets/plugins/jquery-3.3.1.min.js"></script>
    <!--#include virtual="/footer_miro.html" -->

    <!-- Main Javascript -->
    <script type="text/javascript" src="assets/plugins/prism/min/prism-min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-throttle-debounce/jquery.ba-throttle-debounce.min.js"></script>
    <script type="text/javascript" src="assets/plugins/markjs/jquery.mark.min.js"></script>

    <script type="text/javascript" src="assets/js/main.js"></script>
</body>
</html>
