<!DOCTYPE html>
<html lang="en">
<head>
    <title>GAMS WebUI documentation</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">

</head>

<body class="body-orange">
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                          <img class="img-fluid" style="height:50px;" src="assets/images/logo.svg" onerror="this.onerror=null; this.src='assets/images/logo.png'" alt="logo"/>
                            <span class="text-highlight">GAMS</span><span class="text-bold">WebUI</span>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Model deployment</li>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><i class="icon fa fa-paper-plane"></i> Model deployment</h1>
                    <div class="meta"><i class="far fa-clock"></i> Last updated: Jauary 14th, 2019</div>
                </div><!--//doc-header-->
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="introduction-section" class="doc-section">
                                <h2 class="section-title">Introduction</h2>
                                <div id="model-1"  class="section-block">
                                    <p>After testing the demo applications, it's time to prepare your own GAMS model for use with the WebUI. An essential feature of GAMS WebUI is that this can be done in a fast, easy and automated way. For a better understanding it is recommended to have a look at the GAMS code of the <a href="./start.html#start-1">demo applications</a> for the next steps.</p>
                                </div><!--//section-block-->
                            </section><!--//doc-section-->
                            <section id="creating-section" class="doc-section">
                                <h2 class="section-title">Turn your GAMS model into a WebUI</h2>
                                    <div  id="create-1"  class="section-block">
                                        <p>To be able to use the WebUI, an interface must be created between WebUI and the GAMS model to be deployed. This interface primarily consists of the information which symbols of the GAMS model should be visible (and changeable) by the user from within the WebUI. Those GAMS symbols must be flagged in the GAMS code. </p>
                                        <div class="callout-block callout-success">
                                            <div class="icon-holder">
                                                <i class="fas fa-thumbs-up"></i>
                                            </div><!--//icon-holder-->
                                            <div class="content">
                                                <h4 class="callout-title">Note:</h4>
                                                <p>A GAMS model still can be used in the normal way (via <i>GAMS Studio</i>, <i>GAMSIDE</i> or the console) after the following adjustments</p>
                                            </div><!--//content-->
                                        </div>
                                    </div><!--//section-block-->
                                    <div  id="create-2"  class="section-block">
                                        <h3 class="block-title">Model adjustments</h3>
                                        <p>Every GAMS model can be launched inside the WebUI in just a few steps. First, those GAMS symbols that you want to be visible in the interface need to be declared. This can be done by framing the corresponding symbols with the tags <img class="img-fluid" style="height:14px;" src="assets/images/onexternal.png" alt="$onExternalInput" /> / <img class="img-fluid" style="height:14px;" src="assets/images/offexternal.png" alt="$offExternalInput" /> for input data and <img class="img-fluid" style="height:14px;" src="assets/images/onexternalout.png" alt="$onExternalOutput" /> / <img class="img-fluid" style="height:14px;" src="assets/images/offexternalout.png" alt="$offExternalOutput" /> for output data. These tags can be used multiple times within a model. Alternatively one can write <span class="code">UIInput:</span> or <span class="code">UIOutput:</span> at the beginning of the explanatory text of a GAMS symbol to include this symbol in the WebUI. Symbols which are not tagged with one of these markers wonâ€™t be visible in the Web Interface, but they are used within the model run in the background.
                                        </p><p><b>Note:</b> Those symbols which shall be displayed in the WebUI must have an explanatory text in case you are using a GAMS version below 25.2.</p>
                                        <p>The image below shows a simple example for this:</p>
                                        <div class="section-block" style="text-align:center;">
                                            <img class="img-fluid" style="height:100pt;" src="assets/images/deploy_1.png" alt="Flagging Symbols to be displayed in the WebUI" />
                                        </div>
                                        <p>Here, the parameters <span class="code">symbol_1</span> and <span class="code">symbol_2</span> are declared between the mentioned tags <span class="code">$onExternalInput</span> and <span class="code">$offExternalInput</span>. They will be visible in the WebUI(e.g. as tables).
                                        <br><span class="code">symbol_3</span>, on the other hand, was declared outside of said keywords. This parameter will not be visible in the WebUI, however, it is still used as normal parameter in the GAMS model.
                                        <br><span class="code">symbol_4</span> will be displayed in the WebUI as output data because its explanatory text starts with <span class="code">UIOutput</span>.</p>
                                        <p>For the demo model <i>pickstock</i> the symbols to be displayed in the WebUI are specified as follws:</p>
                                        <div class="section-block" style="text-align:center;" id="pickstock_externalinput">
                                            <img class="img-fluid" style="height:100pt;" src="assets/images/deploy_pickstock.png" alt="Pickstock: Flagging Symbols to be displayed in the WebUI" />
                                        </div>
                                        <p>Here, the parameter <span class="code">price</span> as well as the scalars <span class="code">maxstock</span> and <span class="code">trainingdays</span> are declared between the mentioned tags <span class="code">$onExternalInput</span> and <span class="code">$offExternalInput</span>. When starting the WebUI via <span class="code">--webui=launch</span> and loading the <a href="./start.html#create-excel">newly created excel spreadsheet</a> into the WebUI, the following input screen appears:</p>
                                        <div class="section-block" style="text-align:center;">
                                            <img class="img-fluid" style="height:300pt;" src="assets/images/deploy_pickstock4.png" alt="Pickstock: imput symbols displayed in the WebUI" />
                                        </div>
                                        <p>There are a few conventions for the representation of symbols in the WebUI, which are explained in the following section.</p>
                                    </div><!--//section-block-->
                                    <div  id="create-3"  class="section-block">
                                        <h3 class="block-title">Visualization of parameters</h3>
                                        <p>In the default WebUI configuration, each <i>index</i> of a GAMS Parameter is shown in a separate column. The last column contains the parameter <i>values</i>. With this configuration, each <i>set element</i> of an index will be visible in a separate row. In the given example the Parameter <span class="code">price</span> has two indices <span class="code">date</span> and <span class="code">symbol</span>. Each index is shown in a separate column named after the explanatory text of the corresponding set (or in case no explanatory text is available, the name of the symbol).
                                        </p>
                                        <div class="section-block" style="text-align:center;">
                                            <img class="img-fluid" style="height:150pt;" src="assets/images/deploy_pickstock2_b.png" alt="Visualization of described table" />
                                        </div>
                                        <p>Sometimes it can be useful to show each set element of an index in a separate column of the table. For the parameter of the example above this would mean to have a column not for the set <span class="code">symbol</span> ("<span class="code">stockSymbol</span>") itself but for all its elements <span class="code">AAPL</span>, <span class="code">AXP</span>, <span class="code">BA</span>, etc. To achieve this, a minor change in the declaration of the corresponding set has to be made.</p>
                                        <p>One can either:
                                          <ul>
                                            <li>Change the name of the set so that it ends with the header-keyword: <span class="code">hdr</span> (to avoid renaming the set for the entire GAMS model, you can declare an alias for the set afterwards).
                                            <li>Change the explanatory text of the set so that it ends with the keyword <span class="code">hdr</span>. This is shown in the image below.</li>
                                          </ul>
                                          <div class="section-block">
                                              <img class="img-fluid" src="assets/images/expand-table.png" alt="Visualization of expanded table" />
                                          </div>
                                          <p>The Set <span class="code">symbol</span> is defined as the last index of parameter <span class="code">price</span>. We have changed the explanatory text of the Set <span class="code">symbol</span> so that it ends with <span class="code">hdr</span>.
                                          The result of this is that each element of <span class="code">symbol</span> (<span class="code">AAPL</span>, <span class="code">AXP</span>, <span class="code">BA</span>, etc.) is now represented in its own column.</p>
                                          <p>Note that a table width in this way quickly increases when the number of set elements of the last index gets higher. A number of for example 30 Stocks to be represented in a table would lead to 30 stock columns. In this case the default configuration for a table as shown first might be better.</p>
                                          <p>If a Parameters with <b>multiple value columns</b> has to be displayed within the WebUI, a manual definition of the header is required. In the picture below this is done for the Parameter <span class="code">PData</span>. By defining the Index <span class="code">phdr</span> as last index of <span class="code">PData</span>, the set elements <span class="code">Demand</span> and <span class="code">Production Time</span> are shown as value columns in the WebUI table.
                                              <div class="section-block" style="text-align:center;">
                                                  <img class="img-fluid" src="assets/images/multi-col-table.png" alt="Table with Demand and Production time columns" />
                                              </div>
                                          <div style="text-align:center; margin-left:auto; margin-right:auto; width:75%;"><p><br><i>"A table is fine, but actually I want to see beautiful and meaningful graphics in a WebUI."</i></p></div>
                                          <p>Of course this is also possible. In this section it's only about getting a functional WebUI. More about visualization and custom graphics can be found <a href="./customize.html">here</a>.</p>
                                    </div><!--//section-block-->
                                    <div  id="create-4"  class="section-block">
                                        <h3 class="block-title">Visualization of scalar values</h3>
                                        <p>In addition to one- or multidimensional GAMS parameters, 0-dimensional GAMS symbols such as scalars and singleton sets can also be communicated via the WebUI. The handling of these symbols differs from the previously discussed parameters. 
                                        <div class="callout-block callout-success">
                                          <div class="icon-holder">
                                              <i class="fas fa-thumbs-up"></i>
                                          </div><!--//icon-holder-->
                                          <div class="content">
                                              <h4 class="callout-title">Note:</h4>
                                              <p>Scalars and singleton sets are collected in a separate table in the interface by default.</p>
                                          </div><!--//content-->
                                        </div><!--//callout-block-->
                                        They are collected in a separate table in the interface by default. This means that all scalars defined in the GAMS model within the <span class="code">$on</span>/<span class="code">offExternalInput</span> and -<span class="code">output</span> are shown in the Web interface in one single 'scalars' table. The same is also true for scalar output parameters. These are summarized in the results section in a separate 'scalars_out' table.
                                        <br>As an example, we use the pickstock model again:
                                        <br>Here we have declared the scalar input data 'maxstock' and 'trainingdays' (see <a href="#pickstock_externalinput" class="scrollto">image above</a>) between the input tags. In the WebUI, they are displayed aggregated in a table.
                                        <div class="section-block" style="text-align:center;">
                                              <img class="img-fluid" style="height:50pt;" src="assets/images/deploy_pickstock3_b.png" alt="Visualization of scalars in a table" />
                                        </div>
                                        <p>Not only parameters, but also scalar values can be displayed with appealing and useful graphics (we call them <i>widgets</i> in this case).
                                        Scalar values are great for representation as a slider, dropdown menu, checkbox or date selector. You can learn more about this <a href="./customize.html">here</a>.</p>
                                    </div><!--//section-block-->
                                    <div id="create-5" class="section-block">
                                        <h3 class="block-title">Generating model-specific configuration files</h3>
                                        <p>In the next step the model-specific configuration files for the Web Interface are created.</p>
                                        <ul>
                                          <li>Run the model with the compile time parameter <span class="code">--webui=compile</span>.
                                            <div class="section-block" style="text-align:center;">
                                                <img class="img-fluid" src="assets/images/webui-compile.png" alt="--webui=compile" />
                                            </div>
                                            <div class="callout-block callout-warning">
                                                <div class="icon-holder">
                                                    <i class="fas fa-info-circle"></i>
                                                </div><!--//icon-holder-->
                                                <div class="content">
                                                    <h4 class="callout-title">Warning:</h4>
                                                    <p>If you use a GAMS <span class="code">$call</span> inside a model you need to pay attention to the path of external files you might include in this call. This is due to the different working directories depending on whether a GAMS model is run from the WebUI or not. The GAMS WebUI is providing you the path to your model file via the GAMS option <span class="code"><a href="https://www.gams.com/latest/docs/UG_GamsCall.html#GAMSAOinputdir" target="_blank">idir1</a></span>. This means that in order to e.g. import an Excel file <span class="code">test.xlsx</span>, the GDXXRW tool needs to be called like this: <kbd>$call gdxxrw i="%gams.idir1%test.xlsx"</kbd>. Alternatively, you may use absolute paths.</p>
                                                </div><!--//content-->
                                            </div><!--//callout-block-->
                                          </li>
                                          <li>After the run, a new folder named <i>conf</i> is automatically created in your model directory. This folder contains the file <span class="code">GMSIO_config.json</span>. In this file you can find the configuration of the input and output symbols in JSON Synax, which were previously defined in the GAMS model between the <span class="code">$on</span>/<span class="code">offExternalInput</span> and -<span class="code">output</span> tags.
                                            </br>The model folder also contains an Excel file with the same name as your model file. This Excel file contains all the relevant input data that was extracted from your model and can be used to populate your WebUI.
                                            <div class="callout-block callout-warning">
                                                <div class="icon-holder">
                                                    <i class="fas fa-info-circle"></i>
                                                </div><!--//icon-holder-->
                                                <div class="content">
                                                    <h4 class="callout-title">Note:</h4>
                                                    <p>In case you don't find an Excel file with the data, please make sure the <span class="code">xlsxwriter</span> Python module was successfully installed (c.f. <a href="./start.html#pip_install">here</a>).</p>
                                                </div><!--//content-->
                                            </div><!--//callout-block-->
                                          </li>
                                          <li>The very basic configuration is now done. You can start the WebUI by running the model again, this time with <span class="code" style="white-space:nowrap">--webui=launch</span>.
                                            <div class="section-block" style="text-align:center;">
                                                <img class="img-fluid" src="assets/images/webui-launch.png" alt="--webui=launch" />
                                            </div>
                                            The first time this is done, all R packages needed for the WebUI will be automatically installed. This may take a while. When the installation is complete, the WebUI opens with the default browser of the operating system.
                                            With the basic configuration you can upload Excel files, modify them from within the interface and start or stop a GAMS job. You also have access to the <i>log</i> and <i>lst</i> files of GAMS. When the model run has finished successfully, the results can be examined. In the default configuration, tables and pivot tables are generated.
                                          </li>
                                        </ul>
                                        <p><br>Congratulations! A first version of your new WebUI is now up and running!</p>
                                    </div><!--//section-block-->
                                    <div  id="create-custom"  class="section-block">
                                        <h3 class="block-title">Custom configuration</h3>
                                        <p>If required, the web interface of the GAMS model can now be further customized. The GAMS WebUI comes with various pre-implemented graphing options: at the moment these are pie charts, bar charts, line charts, scatter plots and histograms. However, an R API is provided so even highly customized graphics can be generated.</p>
                                        <div class="section-block" style="text-align:center;">
                                                <img class="img-fluid" src="assets/images/gams_webui.png" alt="GAMS WebUI - visualization" />
                                        </div>
                                        <p>Have a look at the <a href="./customize.html">next section</a> and learn how to customize your WebUI.</p>
                                    </div><!--//section-block-->
                            </section><!--//doc-section-->
                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
	                        <nav id="doc-menu" class="nav doc-menu flex-column sticky">
	                            <a class="nav-link scrollto" href="#creating-section">Turn your GAMS model into a WebUI</a>
                                  <nav class="doc-sub-menu nav flex-column">
                                    <a class="nav-link scrollto" href="#create-2">Model adjustments</a>
                                    <a class="nav-link scrollto" href="#create-3">Visualization of parameters</a>
                                    <a class="nav-link scrollto" href="#create-4">Visualization of scalar values</a>
                                    <a class="nav-link scrollto" href="#create-5">Generating model-specific configuration files</a>
                                    <a class="nav-link scrollto" href="#create-custom">Custom configuration</a>
                                  </nav><!--//nav-->
	                        </nav><!--//doc-menu-->
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->
            </div><!--//container-->
        </div><!--//doc-wrapper-->

    </div><!--//page-wrapper-->

    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Designed with <i class="fas fa-heart"></i> by <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers</small>

        </div><!--//container-->
    </footer><!--//footer-->


    <!-- Main Javascript -->
    <script type="text/javascript" src="assets/plugins/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>

</body>
</html>
